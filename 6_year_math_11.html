<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ƒæ­²æ•¸å­¸ç´ é¤Šæ¸¬é©—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        /* Smooth transitions and animations */
        #app > div {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Floating animation for grade badge */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        /* Question and option text sizes */
        .question-text {
            font-size: 1.75rem;
            line-height: 2.25rem;
        }
        .option-text {
            font-size: 1.5rem;
        }
        @media (min-width: 640px) {
            .question-text {
                font-size: 2rem;
                line-height: 2.5rem;
            }
            .option-text {
                font-size: 1.75rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="app" class="min-h-screen p-4">
        <!-- The quiz will be rendered here by JavaScript -->
    </div>

    <script>
        // State variables to manage the quiz
        let currentQuestionIndex = 0;
        let answers = {};
        let showResult = false;
        let startTime = Date.now();

        // Quiz questions for 7-year-olds (Grade 1)
        const questions = [
            // è¨ˆç®— (4é¡Œ) - é€²ä½åŠ æ¸›æ³•ã€ç°¡å–®ä¹˜æ³•æ¦‚å¿µ
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "17 + 8 = ?", options: ["23", "24", "25", "26"], correct: 2, type: "calculation", explanation: "17 + 8 = 17 + 3 + 5 = 20 + 5 = 25ã€‚å…ˆæ¹Šæˆ20ï¼Œå†åŠ å‰©ä¸‹çš„5ï¼ğŸ¯" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "32 - 15 = ?", options: ["15", "16", "17", "18"], correct: 2, type: "calculation", explanation: "32 - 15ï¼šå…ˆç®—32 - 10 = 22ï¼Œå†ç®—22 - 5 = 17ã€‚åˆ†æ­¥é©Ÿæ¸›æ›´å®¹æ˜“ï¼ğŸ’¡" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "5 Ã— 4 = ?ï¼ˆ5å€‹4ç›¸åŠ ï¼‰", options: ["18", "19", "20", "21"], correct: 2, type: "calculation", explanation: "5 Ã— 4 = 4 + 4 + 4 + 4 + 4 = 20ã€‚æˆ–æƒ³æˆ5çµ„ï¼Œæ¯çµ„4å€‹ï¼ğŸŒŸ" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "å¡«ç©ºï¼š25 + __ = 40", options: ["13", "14", "15", "16"], correct: 2, type: "calculation", explanation: "å¾25æ•¸åˆ°40è¦åŠ å¤šå°‘ï¼Ÿ40 - 25 = 15ã€‚æª¢é©—ï¼š25 + 15 = 40 âœ“" },
            
            // å¹¾ä½• (4é¡Œ) - ç«‹é«”åœ–å½¢ã€å°ç¨±ã€è§’åº¦æ¦‚å¿µ
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "æ­£æ–¹é«”ï¼ˆéª°å­ï¼‰æœ‰å¹¾å€‹é¢ï¼Ÿ", options: ["4å€‹", "5å€‹", "6å€‹", "8å€‹"], correct: 2, type: "geometry", explanation: "æ­£æ–¹é«”åƒéª°å­ä¸€æ¨£ï¼Œæœ‰ä¸Šã€ä¸‹ã€å‰ã€å¾Œã€å·¦ã€å³å…±6å€‹é¢ï¼ğŸ²" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "å“ªå€‹åœ–å½¢å¯ä»¥å°æ‘ºå¾Œå®Œå…¨é‡åˆï¼Ÿ", options: ["â™ ", "â™¥", "â™£", "â™¦"], correct: 1, type: "geometry", explanation: "æ„›å¿ƒâ™¥å¾ä¸­é–“å°æ‘ºï¼Œå·¦å³å…©é‚Šæœƒå®Œå…¨é‡åˆï¼Œé€™å«åšå°ç¨±ï¼ğŸ“" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "æ™‚é˜3é»æ•´ï¼Œæ™‚é‡å’Œåˆ†é‡å½¢æˆä»€éº¼è§’ï¼Ÿ", options: ["éŠ³è§’", "ç›´è§’", "éˆè§’", "å¹³è§’"], correct: 1, type: "geometry", explanation: "3é»æ™‚ï¼Œæ™‚é‡æŒ‡3ï¼Œåˆ†é‡æŒ‡12ï¼Œå½¢æˆ90åº¦çš„ç›´è§’ï¼ŒåƒLå½¢ï¼â°" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "å¾å´é¢çœ‹åœ“æŸ±é«”ï¼ˆç½å­ï¼‰ï¼Œçœ‹åˆ°ä»€éº¼å½¢ç‹€ï¼Ÿ", options: ["åœ“å½¢", "æ­£æ–¹å½¢", "é•·æ–¹å½¢", "ä¸‰è§’å½¢"], correct: 2, type: "geometry", explanation: "åœ“æŸ±é«”åƒç½å­ï¼Œå¾å´é¢çœ‹æ˜¯é•·æ–¹å½¢ï¼Œå¾ä¸Šä¸‹çœ‹æ‰æ˜¯åœ“å½¢ï¼ğŸ¥«" },
            
            // æ‡‰ç”¨ (4é¡Œ) - å¤šæ­¥é©Ÿè§£é¡Œã€ç”Ÿæ´»æƒ…å¢ƒ
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "ä¸€ç›’é¤…ä¹¾24ç‰‡ï¼Œåƒäº†ä¸€åŠï¼Œå†åƒ6ç‰‡ï¼Œé‚„å‰©å¹¾ç‰‡ï¼Ÿ", options: ["5ç‰‡", "6ç‰‡", "7ç‰‡", "8ç‰‡"], correct: 1, type: "application", explanation: "24ç‰‡çš„ä¸€åŠæ˜¯12ç‰‡ï¼Œå†åƒ6ç‰‡ï¼š12 - 6 = 6ç‰‡ï¼ğŸª" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "å°è¯å­˜äº†45å…ƒï¼Œè²·æ›¸ç”¨äº†28å…ƒï¼Œåª½åª½å†çµ¦20å…ƒï¼Œç¾åœ¨æœ‰å¤šå°‘ï¼Ÿ", options: ["35å…ƒ", "36å…ƒ", "37å…ƒ", "38å…ƒ"], correct: 2, type: "application", explanation: "45 - 28 = 17å…ƒï¼ˆè²·æ›¸å¾Œï¼‰ï¼Œ17 + 20 = 37å…ƒï¼ˆåª½åª½çµ¦éŒ¢å¾Œï¼‰ğŸ’°" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "ç¾åœ¨7:30ï¼Œå†é45åˆ†é˜æ˜¯å¹¾é»ï¼Ÿ", options: ["8:00", "8:15", "8:30", "8:45"], correct: 1, type: "application", explanation: "7:30 + 30åˆ† = 8:00ï¼Œå†åŠ 15åˆ† = 8:15ã€‚æˆ–7:30 + 45åˆ† = 8:15ï¼â±ï¸" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "3å€‹å°æœ‹å‹å¹³åˆ†18é¡†ç³–ï¼Œæ¯äººå¾—å¹¾é¡†ï¼Ÿ", options: ["5é¡†", "6é¡†", "7é¡†", "8é¡†"], correct: 1, type: "application", explanation: "18 Ã· 3 = 6ï¼Œæ¯å€‹äººå¾—6é¡†ã€‚æª¢é©—ï¼š6 + 6 + 6 = 18 âœ“ ğŸ¬" },
            
            // ä»£æ•¸ (3é¡Œ) - è¤‡é›œè¦å¾‹ã€ç°¡å–®æ–¹ç¨‹å¼æ€ç¶­
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "æ‰¾è¦å¾‹ï¼š3, 6, 9, 12, ?", options: ["14", "15", "16", "17"], correct: 1, type: "algebra", explanation: "æ¯æ¬¡åŠ 3ï¼š3â†’6â†’9â†’12â†’15ã€‚é€™æ˜¯3çš„å€æ•¸è¦å¾‹ï¼ğŸ”¢" },
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "å¦‚æœâ–³+â–³=10ï¼Œé‚£éº¼â–³=?", options: ["4", "5", "6", "7"], correct: 1, type: "algebra", explanation: "å…©å€‹ç›¸åŒçš„â–³åŠ èµ·ä¾†ç­‰æ–¼10ï¼Œæ‰€ä»¥â–³ = 10 Ã· 2 = 5ï¼ğŸ”º" },
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "æ•¸åˆ—ï¼š1, 1, 2, 3, 5, ?ï¼ˆæç¤ºï¼šå‰å…©æ•¸ç›¸åŠ ï¼‰", options: ["6", "7", "8", "9"], correct: 2, type: "algebra", explanation: "1+1=2, 1+2=3, 2+3=5, 3+5=8ã€‚é€™æ˜¯è²»æ°æ•¸åˆ—çš„é–‹å§‹ï¼ğŸŒ€" },
            
            // çµ„åˆ (3é¡Œ) - é‚è¼¯æ¨ç†ã€åˆ†é¡çµ„åˆ
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "ç”¨ç´…ã€é»ƒã€è—ä¸‰è‰²å¡—2æ ¼ï¼Œæœ‰å¹¾ç¨®ä¸åŒå¡—æ³•ï¼Ÿ", options: ["6ç¨®", "8ç¨®", "9ç¨®", "12ç¨®"], correct: 2, type: "combination", explanation: "ç¬¬ä¸€æ ¼3ç¨®é¸æ“‡ï¼Œç¬¬äºŒæ ¼ä¹Ÿ3ç¨®é¸æ“‡ï¼š3Ã—3=9ç¨®çµ„åˆï¼ğŸ¨" },
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "4å€‹å°æœ‹å‹æ’éšŠç…§ç›¸ï¼Œå°æ˜è¦ç«™æœ€å·¦é‚Šï¼Œæœ‰å¹¾ç¨®æ’æ³•ï¼Ÿ", options: ["4ç¨®", "6ç¨®", "8ç¨®", "12ç¨®"], correct: 1, type: "combination", explanation: "å°æ˜å›ºå®šæœ€å·¦é‚Šï¼Œå…¶ä»–3äººå¯ä»¥æœ‰3Ã—2Ã—1=6ç¨®æ’æ³•ï¼ğŸ“¸" },
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "å“ªå€‹ä¸å±¬æ–¼åŒä¸€é¡ï¼Ÿ", options: ["2, 4, 6, 8", "1, 3, 5, 7", "3, 6, 9, 12", "5, 10, 15, 25"], correct: 3, type: "combination", explanation: "å‰ä¸‰çµ„éƒ½æ˜¯ç­‰å·®æ•¸åˆ—ï¼Œæœ€å¾Œä¸€çµ„çš„25æ‰“ç ´äº†+5çš„è¦å¾‹ï¼ˆæ‡‰è©²æ˜¯20ï¼‰ï¼" },
            
            // æ•¸æ„Ÿ (4é¡Œ) - æ•¸çš„å¤§å°ã€ä¼°ç®—ã€åˆ†æ•¸åˆæ­¥
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "æœ€æ¥è¿‘100çš„æ•¸æ˜¯ï¼Ÿ", options: ["89", "95", "98", "103"], correct: 2, type: "number_sense", explanation: "98é›¢100åªå·®2ï¼Œæ˜¯æœ€æ¥è¿‘çš„ï¼ç”¨æ•¸ç·šæƒ³åƒæœƒæ›´æ¸…æ¥š ğŸ“" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "æŠŠ1å€‹æŠ«è–©å¹³å‡åˆ‡æˆ4ç‰‡ï¼Œåƒäº†3ç‰‡ï¼Œåƒäº†å¹¾åˆ†ä¹‹å¹¾ï¼Ÿ", options: ["1/4", "2/4", "3/4", "4/4"], correct: 2, type: "number_sense", explanation: "ç¸½å…±4ç‰‡ï¼Œåƒäº†3ç‰‡ï¼Œå°±æ˜¯3/4ï¼ˆå››åˆ†ä¹‹ä¸‰ï¼‰ï¼ğŸ•" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "å“ªå€‹ç®—å¼çš„ç­”æ¡ˆæœ€å¤§ï¼Ÿ", options: ["15+12", "20+5", "13+13", "19+9"], correct: 3, type: "number_sense", explanation: "å¿«é€Ÿä¼°ç®—ï¼š15+12â‰ˆ27, 20+5=25, 13+13=26, 19+9=28ã€‚28æœ€å¤§ï¼" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "100å…ƒå¯ä»¥è²·å¹¾å€‹25å…ƒçš„ç­†è¨˜æœ¬ï¼Ÿ", options: ["3æœ¬", "4æœ¬", "5æœ¬", "6æœ¬"], correct: 1, type: "number_sense", explanation: "100 Ã· 25 = 4ï¼Œæˆ–æƒ³ï¼š25Ã—4=100ï¼Œæ‰€ä»¥å¯ä»¥è²·4æœ¬ï¼ğŸ““" }
        ];

        const appContainer = document.getElementById('app');

        // Function to handle user's answer
        function handleAnswer(selectedIndex) {
            answers[currentQuestionIndex] = selectedIndex;
            renderApp();

            if (currentQuestionIndex < questions.length - 1) {
                setTimeout(() => {
                    currentQuestionIndex++;
                    renderApp();
                }, 1500);
            } else {
                setTimeout(() => {
                    showResult = true;
                    renderApp();
                }, 1500);
            }
        }

        // Function to restart the quiz
        function restartQuiz() {
            currentQuestionIndex = 0;
            answers = {};
            showResult = false;
            startTime = Date.now();
            renderApp();
        }

        // Function to calculate final results
        function calculateResults() {
            const results = {
                calculation: { correct: 0, total: 0 },
                geometry: { correct: 0, total: 0 },
                application: { correct: 0, total: 0 },
                algebra: { correct: 0, total: 0 },
                combination: { correct: 0, total: 0 },
                number_sense: { correct: 0, total: 0 }
            };

            questions.forEach((question, index) => {
                const type = question.type;
                results[type].total++;
                if (answers[index] === question.correct) {
                    results[type].correct++;
                }
            });
            return results;
        }

        // Main function to render the UI
        function renderApp() {
            // Set a mature gradient background for Grade 1
            document.body.className = 'bg-gradient-to-br from-teal-400 via-blue-500 to-indigo-600';

            if (showResult) {
                renderResultScreen();
            } else {
                renderQuestionScreen();
            }
        }

        // Renders the question view
        function renderQuestionScreen() {
            const question = questions[currentQuestionIndex];
            const selectedAnswer = answers[currentQuestionIndex];
            const isAnswered = selectedAnswer !== undefined;

            const optionsHtml = question.options.map((option, index) => {
                let buttonClass = 'bg-white border-gray-300 text-gray-700 hover:shadow-lg cursor-pointer';
                let icon = '';

                if (isAnswered) {
                    if (index === question.correct) {
                        buttonClass = 'bg-green-200 border-green-400 text-green-800';
                        icon = '<span class="inline-block ml-2">âœ…</span>';
                    } else if (index === selectedAnswer) {
                        buttonClass = 'bg-red-200 border-red-400 text-red-800';
                        icon = '<span class="inline-block ml-2">âŒ</span>';
                    } else {
                        buttonClass = 'bg-gray-200 border-gray-300 text-gray-600';
                    }
                }

                return `
                    <button
                        onclick="${isAnswered ? '' : `handleAnswer(${index})`}"
                        ${isAnswered ? 'disabled' : ''}
                        class="p-4 sm:p-5 rounded-2xl option-text font-bold border-4 transition-all duration-200 transform hover:scale-105 ${buttonClass}"
                    >
                        ${option} ${icon}
                    </button>
                `;
            }).join('');

            appContainer.innerHTML = `
                <div class="max-w-2xl mx-auto">
                    <!-- Grade Badge -->
                    <div class="text-center mb-4">
                        <span class="inline-block bg-gradient-to-r from-amber-400 to-orange-500 text-white px-6 py-3 rounded-full font-bold text-xl floating shadow-lg">
                            ğŸ“ ä¸€å¹´ç´šæ•¸å­¸ ğŸ“
                        </span>
                    </div>

                    <!-- Progress Bar -->
                    <div class="bg-white bg-opacity-20 rounded-full p-2 mb-6">
                        <div 
                            class="bg-gradient-to-r from-green-400 to-blue-500 rounded-full h-4 transition-all duration-500 shadow-inner"
                            style="width: ${((currentQuestionIndex + 1) / questions.length) * 100}%"
                        ></div>
                    </div>

                    <div class="text-center text-white text-xl mb-4 font-semibold">
                        ç¬¬ ${currentQuestionIndex + 1} é¡Œ / å…± ${questions.length} é¡Œ
                    </div>

                    <!-- Question Card -->
                    <div class="${question.color} rounded-3xl shadow-2xl p-6 sm:p-8 border-4">
                        <div class="text-center mb-6">
                            <div class="text-2xl sm:text-3xl font-bold text-gray-700 mb-4">
                                ${question.category}
                            </div>
                            <div class="question-text font-bold text-gray-800 mb-6 min-h-[6rem] flex items-center justify-center">
                                ${question.question}
                            </div>
                        </div>

                        <!-- Answer Options -->
                        <div class="grid grid-cols-2 gap-4">
                            ${optionsHtml}
                        </div>

                        ${isAnswered ? `
                            <div class="mt-6">
                                <div class="text-center text-3xl sm:text-4xl font-bold mb-2">
                                    ${selectedAnswer === question.correct ? "ğŸ‰ ç­”å°äº†ï¼" : "ğŸ’ª åŠ æ²¹ï¼Œå†æƒ³æƒ³ï¼"}
                                </div>
                                ${question.explanation ? `
                                    <div class="bg-white bg-opacity-60 rounded-xl p-4 mt-4">
                                        <div class="text-base font-bold text-gray-700 mb-1">ğŸ“š è§£é¡Œèªªæ˜ï¼š</div>
                                        <div class="text-base text-gray-700">${question.explanation}</div>
                                    </div>
                                ` : ''}
                                <div class="text-center text-lg text-gray-600 mt-2">
                                    ${currentQuestionIndex < questions.length - 1 ? 'æº–å‚™ä¸‹ä¸€é¡Œ...' : 'è¨ˆç®—æˆç¸¾ä¸­...'}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }
        
        // Renders the result view
        function renderResultScreen() {
            const results = calculateResults();
            const totalCorrect = Object.values(results).reduce((sum, r) => sum + r.correct, 0);
            const totalQuestions = questions.length;
            const scorePercentage = totalCorrect / totalQuestions;
            const timeTaken = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(timeTaken / 60);
            const seconds = timeTaken % 60;
            
            let resultEmoji = "ğŸ’ª";
            let resultMessage = "ç¹¼çºŒåŠªåŠ›ï¼Œä½ æœƒè¶Šä¾†è¶Šæ£’ï¼";
            let starCount = 1;
            let medalEmoji = "";

            if (scorePercentage >= 0.95) {
                resultEmoji = "ğŸ†";
                resultMessage = "å¤ªå®Œç¾äº†ï¼ä½ æ˜¯æ•¸å­¸å¤©æ‰ï¼";
                starCount = 5;
                medalEmoji = "ğŸ¥‡";
            } else if (scorePercentage >= 0.85) {
                resultEmoji = "ğŸŠ";
                resultMessage = "éå¸¸å„ªç§€ï¼ä½ æŒæ¡å¾—å¾ˆå¥½ï¼";
                starCount = 4;
                medalEmoji = "ğŸ¥ˆ";
            } else if (scorePercentage >= 0.7) {
                resultEmoji = "ğŸ˜Š";
                resultMessage = "åšå¾—ä¸éŒ¯ï¼æŒçºŒé€²æ­¥ä¸­ï¼";
                starCount = 3;
                medalEmoji = "ğŸ¥‰";
            } else if (scorePercentage >= 0.5) {
                resultEmoji = "ğŸ‘";
                resultMessage = "é‚„ä¸éŒ¯å–”ï¼å¤šç·´ç¿’æœƒæ›´å¥½ï¼";
                starCount = 2;
            }

            const categoryResultsHtml = Object.keys(results).map(key => {
                const categoryMap = {
                    calculation: { name: "ğŸ§® è¨ˆç®—", style: "bg-red-50 border-red-200 text-red-600" },
                    geometry: { name: "ğŸ”º å¹¾ä½•", style: "bg-blue-50 border-blue-200 text-blue-600" },
                    application: { name: "ğŸ›’ æ‡‰ç”¨", style: "bg-green-50 border-green-200 text-green-600" },
                    algebra: { name: "ğŸ¨ ä»£æ•¸", style: "bg-purple-50 border-purple-200 text-purple-600" },
                    combination: { name: "ğŸ§© çµ„åˆ", style: "bg-yellow-50 border-yellow-200 text-yellow-600" },
                    number_sense: { name: "ğŸ”¢ æ•¸æ„Ÿ", style: "bg-pink-50 border-pink-200 text-pink-600" },
                };
                const info = categoryMap[key];
                const percentage = results[key].total > 0 ? Math.round((results[key].correct / results[key].total) * 100) : 0;
                const performanceEmoji = percentage === 100 ? "ğŸŒŸ" : percentage >= 75 ? "âœ¨" : percentage >= 50 ? "ğŸ‘" : "ğŸ’ª";
                
                return `
                    <div class="${info.style} p-4 rounded-xl border-2 transform hover:scale-105 transition-all duration-200">
                        <div class="text-lg font-bold flex justify-between items-center">
                            <span>${info.name}</span>
                            <span>${performanceEmoji}</span>
                        </div>
                        <div class="text-xl font-bold">${results[key].correct}/${results[key].total}</div>
                        <div class="text-sm">æ­£ç¢ºç‡ ${percentage}%</div>
                        <div class="mt-2 bg-gray-200 rounded-full h-2">
                            <div class="bg-gradient-to-r from-blue-400 to-green-400 h-2 rounded-full transition-all duration-1000" 
                                 style="width: ${percentage}%"></div>
                        </div>
                    </div>
                `;
            }).join('');

            const starsHtml = Array(starCount).fill('â­').join(' ');

            appContainer.innerHTML = `
                <div class="max-w-2xl mx-auto">
                    <div class="bg-white rounded-3xl shadow-2xl p-8 text-center">
                        <div class="text-7xl mb-4">${resultEmoji}</div>
                        
                        ${medalEmoji ? `<div class="text-6xl mb-4">${medalEmoji}</div>` : ''}
                        
                        <h2 class="text-3xl font-bold text-gray-800 mb-2">æ¸¬é©—å®Œæˆï¼</h2>
                        <div class="text-4xl mb-4">${starsHtml}</div>
                        
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div class="bg-gradient-to-r from-blue-100 to-blue-200 rounded-xl p-4">
                                <div class="text-lg text-gray-600">ç¸½åˆ†</div>
                                <div class="text-3xl font-bold text-blue-600">${totalCorrect}/${totalQuestions}</div>
                            </div>
                            <div class="bg-gradient-to-r from-green-100 to-green-200 rounded-xl p-4">
                                <div class="text-lg text-gray-600">æ­£ç¢ºç‡</div>
                                <div class="text-3xl font-bold text-green-600">${Math.round(scorePercentage * 100)}%</div>
                            </div>
                        </div>

                        <div class="bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-4 mb-6">
                            <div class="text-lg text-gray-600">å®Œæˆæ™‚é–“</div>
                            <div class="text-2xl font-bold text-purple-600">${minutes}åˆ†${seconds}ç§’</div>
                        </div>

                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6">
                           ${categoryResultsHtml}
                        </div>

                        <div class="text-2xl mb-6 font-bold text-gray-700">
                            ${resultMessage}
                        </div>

                        <div class="flex gap-4 justify-center">
                            <button
                                onclick="restartQuiz()"
                                class="bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xl font-bold py-4 px-8 rounded-2xl hover:shadow-lg transform hover:scale-105 transition-all duration-200"
                            >
                                å†æŒ‘æˆ°ä¸€æ¬¡ ğŸ®
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Initial render to start the quiz
        renderApp();

    </script>
</body>
</html>