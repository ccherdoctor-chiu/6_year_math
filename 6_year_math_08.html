<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…­æ­²æ•¸å­¸å»ºç¯‰å¸«æ¸¬é©—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #0d1b2a; /* Deep blue background */
        }
        #app > div {
            animation: fadeIn 0.8s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .architect-badge {
            animation: blueprint-glow 3s infinite alternate;
        }
        @keyframes blueprint-glow {
            from {
                text-shadow: 0 0 5px #60a5fa, 0 0 10px #60a5fa;
            }
            to {
                text-shadow: 0 0 10px #93c5fd, 0 0 15px #93c5fd;
            }
        }
        .question-text {
            font-size: 1.75rem;
            line-height: 2.5rem;
        }
        .option-text {
            font-size: 1.5rem;
        }
        @media (min-width: 640px) {
            .question-text {
                font-size: 2.25rem;
                line-height: 2.75rem;
            }
            .option-text {
                font-size: 1.75rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="app" class="min-h-screen p-4">
        <!-- The quiz will be rendered here by JavaScript -->
    </div>

    <script>
        // State variables to manage the quiz
        let currentQuestionIndex = 0;
        let answers = {};
        let showResult = false;

        // Architect level quiz questions for 6-year-olds
        const questions = [
            // è¨ˆç®— (3é¡Œ) - é¢ç©ã€å‘¨é•·
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "ä¸€å€‹é•·æ–¹å½¢æˆ¿é–“ï¼Œé•·5å…¬å°ºï¼Œå¯¬4å…¬å°ºï¼Œé‹ªæ»¿åœ°ç£šéœ€è¦å¤šå°‘å¹³æ–¹å…¬å°ºçš„åœ°ç£šï¼Ÿ", options: ["9å¹³æ–¹å…¬å°º", "18å¹³æ–¹å…¬å°º", "20å¹³æ–¹å…¬å°º", "25å¹³æ–¹å…¬å°º"], correct: 2, type: "calculation", explanation: "æˆ¿é–“çš„é¢ç©æ˜¯ é•· x å¯¬ã€‚æ‰€ä»¥ 5 x 4 = 20 å¹³æ–¹å…¬å°ºã€‚é€™å°±æ˜¯è¨ˆç®—é¢ç©çš„å…¬å¼ï¼" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "ä¸€å€‹æ­£æ–¹å½¢èŠ±åœ’ï¼Œæ¯é‚Šé•·6å…¬å°ºï¼Œè¦ç”¨æŸµæ¬„åœèµ·ä¾†ï¼Œç¸½å…±éœ€è¦å¤šé•·çš„æŸµæ¬„ï¼Ÿ", options: ["12å…¬å°º", "18å…¬å°º", "24å…¬å°º", "36å…¬å°º"], correct: 2, type: "calculation", explanation: "æ­£æ–¹å½¢æœ‰4æ¢ä¸€æ¨£é•·çš„é‚Šï¼Œæ‰€ä»¥å‘¨é•·æ˜¯ 6 x 4 = 24 å…¬å°ºã€‚" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "è“‹ä¸€é¢ç‰†éœ€è¦100å¡Šç£šé ­ğŸ§±ï¼Œå·¥äººå·²ç¶“ç”¨äº†65å¡Šï¼Œé‚„éœ€è¦å¤šå°‘å¡Šï¼Ÿ", options: ["25å¡Š", "35å¡Š", "45å¡Š", "165å¡Š"], correct: 1, type: "calculation", explanation: "é€™æ˜¯ä¸€å€‹æ¸›æ³•å•é¡Œï¼š100 - 65 = 35 å¡Šã€‚é‚„éœ€è¦35å¡Šç£šé ­æ‰èƒ½å®Œæˆç‰†å£ã€‚" },
            
            // å¹¾ä½• (3é¡Œ) - è¦–åœ–ã€å°ç¨±ã€3Dçµæ§‹
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "å¾æ­£ä¸Šæ–¹çœ‹ä¸€å€‹é‡‘å­—å¡”ï¼Œä½ æœƒçœ‹åˆ°ä»€éº¼å½¢ç‹€ï¼Ÿ", options: ["ä¸€å€‹ä¸‰è§’å½¢", "ä¸€å€‹åœ“å½¢", "ä¸€å€‹å¸¶æœ‰å°è§’ç·šçš„æ­£æ–¹å½¢", "ä¸€å€‹é»"], correct: 2, type: "geometry", explanation: "å¾æ­£ä¸Šæ–¹çœ‹ï¼Œä½ æœƒçœ‹åˆ°é‡‘å­—å¡”çš„æ–¹å½¢åº•åº§ï¼Œä»¥åŠå¾å››å€‹è§’é€£åˆ°é ‚é»çš„æ–œé‚Šï¼Œçœ‹èµ·ä¾†å°±åƒæœ‰å°è§’ç·šçš„æ­£æ–¹å½¢ã€‚" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "ä¸€åº§æ©‹æ¨‘çš„è¨­è¨ˆé€šå¸¸æ˜¯å·¦å³å°ç¨±çš„ï¼Œé€™æ˜¯ç‚ºäº†ä»€éº¼ï¼Ÿ", options: ["æ¯”è¼ƒå¥½çœ‹", "ç¯€çœææ–™", "è®“åŠ›é‡å‡å‹»åˆ†ä½ˆï¼Œæ›´ç©©å›º", "æ–¹ä¾¿è»Šè¼›é€šè¡Œ"], correct: 2, type: "geometry", explanation: "å°ç¨±çš„çµæ§‹å¯ä»¥è®“æ©‹æ¨‘å…©å´å—åŠ›å‡å‹»ï¼Œé€™æ¨£æœƒæ›´å®‰å…¨ã€æ›´ç©©å›ºã€‚ç¾è§€ä¹Ÿæ˜¯ä¸€å€‹åŸå› ï¼Œä½†ç©©å›ºæ˜¯é¦–è¦è€ƒé‡ï¼" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "ç”¨8å€‹ä¸€æ¨£çš„å°æ­£æ–¹é«”ï¼Œå¯ä»¥çµ„æˆä¸€å€‹æ›´å¤§çš„å¯¦å¿ƒæ­£æ–¹é«”ã€‚é€™å€‹å¤§æ­£æ–¹é«”æœ‰å¤šå°‘å€‹é¢æ˜¯ã€Œçœ‹ä¸åˆ°ã€çš„ï¼Ÿ", options: ["0å€‹", "8å€‹", "12å€‹", "24å€‹"], correct: 0, type: "geometry", explanation: "é€™é¡Œæœ‰é» trickyï¼å› ç‚ºæ˜¯å¯¦å¿ƒçš„ï¼Œæ‰€æœ‰å°æ­£æ–¹é«”çš„é¢éƒ½åœ¨å…§éƒ¨äº’ç›¸è²¼åˆï¼Œæˆ–è€…æœå¤–ã€‚æ²’æœ‰ä»»ä½•ä¸€å€‹é¢æ˜¯å®Œå…¨è¢«åŒ…åœ¨è£¡é¢è€Œçœ‹ä¸åˆ°çš„ã€‚" },
            
            // æ‡‰ç”¨ (4é¡Œ) - çµæ§‹é‚è¼¯ã€è³‡æºè¦åŠƒ
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "è“‹æˆ¿å­è¦å…ˆè“‹åœ°åŸºé‚„æ˜¯å…ˆè“‹å±‹é ‚ï¼Ÿ", options: ["å…ˆè“‹å±‹é ‚", "å…ˆè“‹åœ°åŸº", "ä¸€èµ·è“‹", "éƒ½å¯ä»¥"], correct: 1, type: "application", explanation: "è“‹ä»»ä½•å»ºç¯‰ç‰©éƒ½è¦å¾æœ€ä¸‹é¢é–‹å§‹ï¼Œç©©å›ºçš„åœ°åŸºæ‰èƒ½æ”¯æ’èµ·æ•´æ£Ÿæˆ¿å­ã€‚" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "æœ‰ä¸‰ç¨®çª—æˆ¶ï¼šåœ“å½¢âšªã€æ–¹å½¢â¬œã€ä¸‰è§’å½¢ğŸ”ºã€‚å¦‚æœç‰†å£ä¸Šå·²ç¶“æœ‰ä¸€å€‹æ–¹å½¢çª—æˆ¶ï¼Œæ—é‚Šå†é–‹ä¸€å€‹çª—æˆ¶ï¼Œç‚ºäº†è®“ç‰†å£çœ‹èµ·ä¾†æœ€ã€Œå’Œè«§ã€ï¼Œä½ æœƒé¸å“ªå€‹ï¼Ÿ", options: ["åœ“å½¢", "æ–¹å½¢", "ä¸‰è§’å½¢", "éƒ½å¯ä»¥"], correct: 1, type: "application", explanation: "åœ¨è¨­è¨ˆä¸­ï¼Œã€Œé‡è¤‡ã€æ˜¯ä¸€ç¨®å‰µé€ å’Œè«§èˆ‡è¦å¾‹æ„Ÿçš„æ–¹æ³•ã€‚ä½¿ç”¨ç›¸åŒçš„æ–¹å½¢çª—æˆ¶æœƒè®“è¦–è¦ºä¸Šæ›´çµ±ä¸€ã€æ›´å’Œè«§ã€‚" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "ä¸€å€‹å·¥äººä¸€å¤©å¯ä»¥æ¼†3é¢ç‰†ï¼Œç¾åœ¨æœ‰10é¢ç‰†è¦æ¼†ï¼Œéœ€è¦å¹¾å€‹å·¥äººæ‰å¯ä»¥åœ¨ã€Œä¸€å¤©å…§ã€å®Œæˆï¼Ÿ", options: ["3å€‹", "4å€‹", "5å€‹", "10å€‹"], correct: 1, type: "application", explanation: "1å€‹å·¥äººæ¼†3é¢ï¼Œ2å€‹æ¼†6é¢ï¼Œ3å€‹æ¼†9é¢ã€‚æ‰€ä»¥éœ€è¦ç¬¬4å€‹å·¥äººä¾†æ¼†æœ€å¾Œä¸€é¢ç‰†ï¼Œæ‰èƒ½åœ¨ä¸€å¤©å…§å®Œæˆã€‚" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "å»ºç¯‰å¸«ç•«è—åœ–æ™‚ï¼ŒæŠŠ10å…¬å°ºçš„ç‰†ç•«æˆ10å…¬åˆ†ã€‚é‚£5å…¬å°ºçš„é–€æ‡‰è©²ç•«æˆå¹¾å…¬åˆ†ï¼Ÿ", options: ["1å…¬åˆ†", "2å…¬åˆ†", "5å…¬åˆ†", "10å…¬åˆ†"], correct: 2, type: "application", explanation: "é€™å°±æ˜¯æ¯”ä¾‹å°ºçš„æ¦‚å¿µï¼ç‰†çš„é•·åº¦ç¸®å°äº†ä¸€åŠï¼ˆ10å…¬å°º -> 5å…¬å°ºï¼‰ï¼Œæ‰€ä»¥åœ–ä¸Šçš„é•·åº¦ä¹Ÿè¦ç¸®å°ä¸€åŠï¼ˆ10å…¬åˆ† -> 5å…¬åˆ†ï¼‰ã€‚" },

            // ä»£æ•¸ (3é¡Œ) - æ¯”ä¾‹ã€ç°¡å–®å…¬å¼
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "å¦‚æœè“‹ä¸€å±¤æ¨“éœ€è¦5å™¸é‹¼ç­‹ï¼Œè“‹ N å±¤æ¨“éœ€è¦å¤šå°‘å™¸ï¼Ÿ", options: ["5 + N", "5 x N", "N - 5", "5 / N"], correct: 1, type: "algebra", explanation: "é€™æ˜¯ä¸€å€‹ç°¡å–®çš„ç·šæ€§é—œä¿‚ã€‚éœ€è¦çš„é‹¼ç­‹ç¸½é‡ = æ¯å±¤çš„é‡ x æ¨“å±¤æ•¸ã€‚ç”¨ä»£æ•¸è¡¨ç¤ºå°±æ˜¯ 5Nã€‚" },
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "ä¸€å€‹æˆ¿é–“çš„é•·åº¦æ˜¯ Lï¼Œå¯¬åº¦æ˜¯ Wã€‚å®ƒçš„é¢ç©å…¬å¼ A æ˜¯ä»€éº¼ï¼Ÿ", options: ["A = L + W", "A = 2L + 2W", "A = L x W", "A = L - W"], correct: 2, type: "algebra", explanation: "é•·æ–¹å½¢çš„é¢ç©å…¬å¼æ˜¯ é•·ä¹˜ä»¥å¯¬ï¼Œé€™æ˜¯æ‰€æœ‰å»ºç¯‰å¸«å’Œè¨­è¨ˆå¸«éƒ½å¿…é ˆçŸ¥é“çš„åŸºæœ¬å…¬å¼ï¼" },
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "ä¸€æ£Ÿå»ºç¯‰çš„é«˜åº¦ H æ˜¯æ¨“å±¤æ•¸ F å’Œæ¯å±¤æ¨“é«˜åº¦ h çš„ä¹˜ç©ã€‚å“ªå€‹å…¬å¼æ˜¯å°çš„ï¼Ÿ", options: ["H = F + h", "F = H x h", "H = F / h", "H = F x h"], correct: 3, type: "algebra", explanation: "ç¸½é«˜åº¦ç­‰æ–¼æ¨“å±¤æ•¸ä¹˜ä»¥æ¯å±¤çš„é«˜åº¦ï¼Œé€™å€‹é‚è¼¯é—œä¿‚å¯ä»¥ç”¨å…¬å¼ H = F x h ä¾†ç²¾ç¢ºè¡¨é”ã€‚" },
            
            // çµ„åˆ (3é¡Œ) - ç©ºé–“ä½ˆå±€
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "æœ‰å®¢å»³ã€å»šæˆ¿ã€è‡¥å®¤ä¸‰å€‹æˆ¿é–“è¦æ’æˆä¸€æ’ï¼Œæœ‰å¹¾ç¨®ä¸åŒçš„æ’åˆ—æ–¹å¼ï¼Ÿ", options: ["3ç¨®", "4ç¨®", "5ç¨®", "6ç¨®"], correct: 3, type: "combination", explanation: "é€™æ˜¯ä¸€å€‹æ’åˆ—å•é¡Œã€‚ç¬¬ä¸€å€‹ä½ç½®æœ‰3ç¨®é¸æ“‡ï¼Œç¬¬äºŒå€‹æœ‰2ç¨®ï¼Œæœ€å¾Œ1ç¨®ã€‚ç¸½å…± 3 x 2 x 1 = 6ç¨®ã€‚" },
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "è¦ç”¨ç´…ã€è—ã€é»ƒä¸‰ç¨®é¡è‰²æ¼†ä¸€å€‹ä¸‰å±¤çš„è›‹ç³•å»ºç¯‰ï¼Œæ¯å±¤é¡è‰²éƒ½ä¸åŒï¼Œæœ‰å¹¾ç¨®æ¼†æ³•ï¼Ÿ", options: ["3ç¨®", "6ç¨®", "9ç¨®", "12ç¨®"], correct: 1, type: "combination", explanation: "è·Ÿä¸Šé¡Œä¸€æ¨£ï¼ç¬¬ä¸€å±¤æœ‰3ç¨®é¡è‰²å¯é¸ï¼Œç¬¬äºŒå±¤å‰©2ç¨®ï¼Œç¬¬ä¸‰å±¤å‰©1ç¨®ã€‚ç¸½å…± 3 x 2 x 1 = 6ç¨®ã€‚" },
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "ç”¨å…©ç¨®ä¸åŒçš„ç£ç£š(ä¾‹å¦‚ï¼šâ¬›å’Œâ¬œ)é‹ªæ»¿ä¸€å€‹2x2çš„åœ°æ¿ï¼Œæœ‰å¹¾ç¨®æ–¹æ³•ï¼Ÿ(æ—‹è½‰å¾Œä¸€æ¨£ç®—åŒä¸€ç¨®)", options: ["4ç¨®", "5ç¨®", "6ç¨®", "7ç¨®"], correct: 2, type: "combination", explanation: "é€™é¡Œéå¸¸é›£ï¼éœ€è¦ç•«åœ–å’Œåˆ†é¡ã€‚ç­”æ¡ˆæ˜¯6ç¨®ã€‚èƒ½æƒ³åˆ°é€™è£¡å·²ç¶“æ˜¯å»ºç¯‰å¤§å¸«äº†ï¼" },
            
            // æ•¸æ„Ÿ (3é¡Œ) - ä¼°ç®—ã€å–®ä½
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "ä¸€æ£Ÿ10å±¤æ¨“çš„å…¬å¯“ï¼Œå¤§ç´„æœ‰å¤šé«˜ï¼Ÿ", options: ["3å…¬å°º", "30å…¬å°º", "300å…¬å°º", "3å…¬é‡Œ"], correct: 1, type: "number_sense", explanation: "ä¸€å±¤æ¨“å¤§ç´„3å…¬å°ºé«˜ï¼Œæ‰€ä»¥10å±¤æ¨“å¤§ç´„æ˜¯ 10 x 3 = 30å…¬å°ºã€‚é€™å°±æ˜¯å»ºç¯‰å¸«çš„ä¼°ç®—èƒ½åŠ›ï¼" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "æ¸¬é‡ä¸€å€‹æˆ¿é–“çš„é•·åº¦ï¼Œç”¨å“ªå€‹å–®ä½æœ€é©åˆï¼Ÿ", options: ["å…¬åˆ†(cm)", "å…¬å°º(m)", "å…¬é‡Œ(km)", "æ¯«ç±³(mm)"], correct: 1, type: "number_sense", explanation: "å…¬å°ºæ˜¯æ¸¬é‡æˆ¿é–“ã€å»ºç¯‰ç‰©å¤§å°æœ€å¸¸ç”¨çš„å–®ä½ã€‚ç”¨å…¬åˆ†æˆ–æ¯«ç±³æœƒæ•¸å­—å¤ªå¤§ï¼Œç”¨å…¬é‡Œåˆå¤ªå°äº†ã€‚" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "ä¸€å€‹è¨­è¨ˆåœ–ä¸Šï¼ŒæŸ±å­çœ‹èµ·ä¾†æ¯”æ¨‘æœ¨ç²—ã€‚åœ¨çœŸå¯¦ä¸–ç•Œè£¡ï¼Œé€šå¸¸æ˜¯å“ªå€‹æ¯”è¼ƒç²—ï¼Ÿ", options: ["æŸ±å­", "æ¨‘æœ¨", "ä¸€æ¨£ç²—", "çœ‹æƒ…æ³"], correct: 0, type: "number_sense", explanation: "æŸ±å­(å‚ç›´çš„)éœ€è¦æ”¯æ’æ•´æ£Ÿå»ºç¯‰çš„é‡é‡ï¼Œæ‰€ä»¥é€šå¸¸æœƒæ¯”æ¨‘æœ¨(æ°´å¹³çš„)æ›´ç²—å£¯ã€æ›´å …å›ºã€‚" }
        ];

        const appContainer = document.getElementById('app');

        function handleAnswer(selectedIndex) {
            answers[currentQuestionIndex] = selectedIndex;
            renderApp(); 

            if (currentQuestionIndex < questions.length - 1) {
                setTimeout(() => {
                    currentQuestionIndex++;
                    renderApp();
                }, 3000); 
            } else {
                setTimeout(() => {
                    showResult = true;
                    renderApp();
                }, 3000);
            }
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            answers = {};
            showResult = false;
            renderApp();
        }

        function calculateResults() {
            const results = {
                calculation: { correct: 0, total: 0 },
                geometry: { correct: 0, total: 0 },
                application: { correct: 0, total: 0 },
                algebra: { correct: 0, total: 0 },
                combination: { correct: 0, total: 0 },
                number_sense: { correct: 0, total: 0 }
            };

            questions.forEach((question, index) => {
                const type = question.type;
                results[type].total++;
                if (answers[index] === question.correct) {
                    results[type].correct++;
                }
            });
            return results;
        }

        function renderApp() {
            document.body.className = 'bg-[#0d1b2a]';

            if (showResult) {
                renderResultScreen();
            } else {
                renderQuestionScreen();
            }
        }

        function renderQuestionScreen() {
            const question = questions[currentQuestionIndex];
            const selectedAnswer = answers[currentQuestionIndex];
            const isAnswered = selectedAnswer !== undefined;

            const optionsHtml = question.options.map((option, index) => {
                let buttonClass = 'bg-slate-700 bg-opacity-50 border-cyan-400 text-white hover:bg-cyan-900 hover:border-cyan-300 cursor-pointer';
                let icon = '';

                if (isAnswered) {
                    if (index === question.correct) {
                        buttonClass = 'bg-green-500 border-green-400 text-white';
                        icon = '<span class="inline-block ml-2">ğŸ“</span>';
                    } else if (index === selectedAnswer) {
                        buttonClass = 'bg-red-800 border-red-600 text-white';
                        icon = '<span class="inline-block ml-2">âŒ</span>';
                    } else {
                        buttonClass = 'bg-gray-800 border-gray-700 text-gray-500';
                    }
                }

                return `
                    <button
                        onclick="${isAnswered ? '' : `handleAnswer(${index})`}"
                        ${isAnswered ? 'disabled' : ''}
                        class="p-4 sm:p-6 rounded-lg option-text font-bold border-4 transition-all duration-300 transform hover:shadow-xl hover:scale-105 ${buttonClass}"
                    >
                        ${option} ${icon}
                    </button>
                `;
            }).join('');

            appContainer.innerHTML = `
                <div class="max-w-3xl mx-auto">
                    <div class="text-center mb-6">
                        <span class="inline-block bg-clip-text text-transparent bg-gradient-to-r from-cyan-300 via-blue-400 to-cyan-200 px-6 py-3 font-bold text-4xl architect-badge">
                            ğŸ“ å»ºç¯‰å¸«è—åœ– ğŸ“
                        </span>
                    </div>

                    <div class="bg-black bg-opacity-20 rounded-full p-2 mb-6">
                        <div 
                            class="bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full h-4 transition-all duration-500"
                            style="width: ${((currentQuestionIndex + 1) / questions.length) * 100}%"
                        ></div>
                    </div>

                    <div class="text-center text-cyan-200 text-xl mb-4">
                        è¨­è¨ˆåœ– ${currentQuestionIndex + 1} / ${questions.length}
                    </div>

                    <div class="bg-slate-800 bg-opacity-80 backdrop-blur-sm rounded-lg shadow-2xl p-6 sm:p-8 border-4 border-cyan-500">
                        <div class="text-center mb-6">
                            <div class="text-3xl font-bold text-cyan-300 mb-4">
                                ${question.category}
                            </div>
                            <div class="question-text font-bold text-white mb-6 min-h-[8rem] flex flex-col items-center justify-center">
                                ${question.question}
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${optionsHtml}
                        </div>

                        ${isAnswered ? `
                            <div class="mt-8">
                                <div class="text-center text-3xl sm:text-4xl font-bold mb-2 text-white">
                                    ${selectedAnswer === question.correct ? "å®Œç¾çš„çµæ§‹ï¼" : "éœ€è¦é‡æ–°è¨ˆç®—..."}
                                </div>
                                ${question.explanation ? `
                                    <div class="bg-slate-900 bg-opacity-80 rounded-lg p-4 mt-4 border-2 border-cyan-700">
                                        <div class="text-lg font-bold text-cyan-300 mb-1">ğŸ’¡ å»ºç¯‰å¸«ç­†è¨˜ï¼š</div>
                                        <div class="text-base text-gray-200">${question.explanation}</div>
                                    </div>
                                ` : ''}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }
        
        function renderResultScreen() {
            const results = calculateResults();
            const totalCorrect = Object.values(results).reduce((sum, r) => sum + r.correct, 0);
            const totalQuestions = questions.length;
            const scorePercentage = totalCorrect / totalQuestions;
            
            let resultEmoji = "ğŸ¤”";
            let resultMessage = "ä½ çš„è¨­è¨ˆè—åœ–å……æ»¿äº†æ½›åŠ›èˆ‡æ™ºæ…§ï¼";
            let starCount = 4;

            if (scorePercentage >= 0.8) {
                resultEmoji = "ğŸ—ï¸";
                resultMessage = "ä¸€åº§æ•¸å­¸çš„æ‘©å¤©å¤§æ¨“å·²ç”±ä½ å»ºæˆï¼ä½ æ˜¯å»ºç¯‰å¤§å¸«ï¼";
                starCount = 5;
            } else if (scorePercentage >= 0.6) {
                resultEmoji = "ğŸ›ï¸";
                resultMessage = "å“è¶Šçš„è¨­è¨ˆï¼ä½ çš„çµæ§‹æ€ç¶­ç„¡æ‡ˆå¯æ“Šï¼";
                starCount = 4;
            } else if (scorePercentage >= 0.4) {
                resultEmoji = "ğŸ§±";
                resultMessage = "ç©©å›ºçš„åŸºç¤ï¼ä½ å·²æŒæ¡äº†å»ºç¯‰æ•¸å­¸çš„æ ¸å¿ƒï¼";
                starCount = 3;
            }

            const categoryResultsHtml = Object.keys(results).map(key => {
                const categoryMap = {
                    calculation: { name: "ğŸ§® è¨ˆç®—", style: "bg-red-900 bg-opacity-50 border-red-700 text-red-200" },
                    geometry: { name: "ğŸ”º å¹¾ä½•", style: "bg-blue-900 bg-opacity-50 border-blue-700 text-blue-200" },
                    application: { name: "ğŸ›’ æ‡‰ç”¨", style: "bg-green-900 bg-opacity-50 border-green-700 text-green-200" },
                    algebra: { name: "ğŸ¨ ä»£æ•¸", style: "bg-purple-900 bg-opacity-50 border-purple-700 text-purple-200" },
                    combination: { name: "ğŸ§© çµ„åˆ", style: "bg-yellow-900 bg-opacity-50 border-yellow-700 text-yellow-200" },
                    number_sense: { name: "ğŸ”¢ æ•¸æ„Ÿ", style: "bg-pink-900 bg-opacity-50 border-pink-700 text-pink-200" },
                };
                const info = categoryMap[key];
                return `
                    <div class="${info.style} p-4 rounded-xl border-2">
                        <div class="text-lg font-bold">${info.name}</div>
                        <div class="text-xl font-bold">${results[key].correct}/${results[key].total}</div>
                    </div>
                `;
            }).join('');

            const starsHtml = Array(starCount).fill('ğŸ›ï¸').join(' ');

            appContainer.innerHTML = `
                <div class="max-w-2xl mx-auto">
                    <div class="bg-slate-800 bg-opacity-80 backdrop-blur-sm rounded-lg shadow-2xl p-8 text-center border-4 border-cyan-400">
                        <div class="text-7xl mb-4">${resultEmoji}</div>
                        
                        <h2 class="text-3xl font-bold text-white mb-2">å»ºç¯‰å¸«è©¦ç…‰å®Œæˆï¼</h2>
                        <div class="text-5xl mb-4">${starsHtml}</div>
                        
                        <div class="text-2xl font-bold text-cyan-300 mb-6">
                            æœ€çµ‚å¾—åˆ†ï¼š${totalCorrect} / ${totalQuestions}
                        </div>

                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6">
                           ${categoryResultsHtml}
                        </div>

                        <div class="text-2xl mb-6 font-bold text-gray-300">
                            ${resultMessage}
                        </div>

                        <button
                            onclick="restartQuiz()"
                            class="bg-gradient-to-r from-cyan-500 to-blue-600 text-white text-xl font-bold py-4 px-8 rounded-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-200"
                        >
                            é–‹å•Ÿæ–°è—åœ– ğŸ—ï¸
                        </button>
                    </div>
                </div>
            `;
        }

        renderApp();

    </script>
</body>
</html>
