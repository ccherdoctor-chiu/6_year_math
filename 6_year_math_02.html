<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…­æ­²æ•¸å­¸é€²éšæ¸¬é©—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
        }
        /* Smooth transitions and animations */
        #app > div {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Sparkle animation for advanced badge */
        .sparkle {
            animation: sparkle 2s infinite;
        }
        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(5deg); }
        }
        /* Make emoji display larger */
        .question-text {
            font-size: 2rem;
            line-height: 2.5rem;
        }
        .option-text {
            font-size: 1.75rem;
        }
        @media (min-width: 640px) {
            .question-text {
                font-size: 2.5rem;
                line-height: 3rem;
            }
            .option-text {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="app" class="min-h-screen p-4">
        <!-- The quiz will be rendered here by JavaScript -->
    </div>

    <script>
        // State variables to manage the quiz
        let currentQuestionIndex = 0;
        let answers = {};
        let showResult = false;

        // Advanced quiz questions for 6-year-olds
        const questions = [
            // è¨ˆç®— (4é¡Œ) - æ›´é›£çš„è¨ˆç®—é¡Œ
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "8 + 7 = ?", options: ["13", "14", "15", "16"], correct: 2, type: "calculation", explanation: "æŠŠ8å’Œ7åˆ†è§£ï¼š8 + 7 = 8 + 2 + 5 = 10 + 5 = 15 ğŸ¯ æˆ–ç”¨æ‰‹æŒ‡ï¼š8å€‹ âœ‹âœŒï¸ åŠ 7å€‹ âœ‹âœŒï¸ = 15å€‹ï¼" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "16 - 9 = ?", options: ["5", "6", "7", "8"], correct: 2, type: "calculation", explanation: "å¾16å€’æ•¸9å€‹ï¼š16â†’15â†’14â†’13â†’12â†’11â†’10â†’9â†’8â†’7ï¼Œåœåœ¨7ï¼æˆ–æƒ³æˆï¼š16 - 10 + 1 = 6 + 1 = 7 ğŸŒŸ" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "3 + 4 + 5 = ?", options: ["10", "11", "12", "13"], correct: 2, type: "calculation", explanation: "åˆ†æ­¥é©Ÿç®—ï¼š3 + 4 = 7ï¼Œå†åŠ 5 = 12ï¼æˆ–é‡æ–°çµ„åˆï¼š3 + 5 = 8ï¼Œå†åŠ 4 = 12 ğŸˆ" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "æ•¸ä¸€æ•¸ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ", options: ["9", "10", "11", "12"], correct: 2, type: "calculation", explanation: "æˆ‘å€‘å¯ä»¥åˆ†çµ„æ•¸ï¼š5å€‹ä¸€çµ„ ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ + 5å€‹ä¸€çµ„ ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ + 1å€‹ ğŸŒŸ = 10 + 1 = 11å€‹æ˜Ÿæ˜Ÿï¼â­" },
            
            // å¹¾ä½• (4é¡Œ) - æ›´è¤‡é›œçš„ç©ºé–“æ¦‚å¿µ
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "å“ªå€‹å½¢ç‹€æœ‰4æ¢é‚Šï¼Ÿ", options: ["â­•", "ğŸ”º", "â¬œ", "â­"], correct: 2, type: "geometry", explanation: "æ­£æ–¹å½¢â¬œæœ‰4æ¢é‚Šï¼šä¸Šé‚Šã€ä¸‹é‚Šã€å·¦é‚Šã€å³é‚Šã€‚åœ“å½¢æ²’æœ‰é‚Šï¼Œä¸‰è§’å½¢æœ‰3æ¢é‚Šï¼Œæ˜Ÿæ˜Ÿæœ‰10æ¢é‚Šï¼" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "å¾ä¸Šé¢çœ‹ä¸€å€‹çƒï¼Œçœ‹åˆ°ä»€éº¼å½¢ç‹€ï¼Ÿ", options: ["æ­£æ–¹å½¢", "åœ“å½¢", "ä¸‰è§’å½¢", "é•·æ–¹å½¢"], correct: 1, type: "geometry", explanation: "çƒå¾ä»»ä½•è§’åº¦çœ‹éƒ½æ˜¯åœ“å½¢çš„ï¼å°±åƒçœ‹ç±ƒçƒğŸ€æˆ–åœ°çƒğŸŒï¼Œå¾ä¸Šé¢çœ‹éƒ½æ˜¯åœ“åœ“çš„ï¼" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "å“ªå€‹æœ€é•·ï¼ŸğŸ“", options: ["â€”â€”", "â€”â€”â€”â€”", "â€”â€”â€”", "â€”â€”â€”â€”â€”â€”"], correct: 3, type: "geometry", explanation: "ç”¨çœ¼ç›ä»”ç´°æ¯”è¼ƒï¼Œæˆ–æƒ³åƒç”¨å°ºé‡ï¼Œæœ€å¾Œä¸€æ¢ç·šæœ‰æœ€å¤šçš„æ©«ç·šç¬¦è™Ÿï¼Œæ‰€ä»¥æœ€é•·ï¼ğŸ“" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "ç©æœ¨å †ï¼šğŸŸ¦åœ¨ğŸŸ¨ä¸Šé¢ï¼ŒğŸŸ¨åœ¨ğŸŸ©ä¸Šé¢ã€‚å“ªå€‹åœ¨æœ€ä¸‹é¢ï¼Ÿ", options: ["ğŸŸ¦", "ğŸŸ¨", "ğŸŸ©", "éƒ½ä¸€æ¨£é«˜"], correct: 2, type: "geometry", explanation: "å¾ä¸‹å¾€ä¸Šï¼šğŸŸ©ï¼ˆæœ€ä¸‹é¢ï¼‰â†’ ğŸŸ¨ï¼ˆä¸­é–“ï¼‰â†’ ğŸŸ¦ï¼ˆæœ€ä¸Šé¢ï¼‰ã€‚å°±åƒè“‹æˆ¿å­ï¼Œè¦å¾åœ°åŸºé–‹å§‹ï¼ğŸ—ï¸" },
            
            // æ‡‰ç”¨ (4é¡Œ) - éœ€è¦å¤šæ­¥é©Ÿæ€è€ƒçš„å•é¡Œ
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "å°æ˜æ—©ä¸Šæœ‰10å…ƒğŸ’°ï¼Œè²·ç³–æœèŠ±äº†3å…ƒï¼Œåª½åª½åˆçµ¦5å…ƒï¼Œç¾åœ¨æœ‰å¤šå°‘ï¼Ÿ", options: ["10å…ƒ", "11å…ƒ", "12å…ƒ", "13å…ƒ"], correct: 2, type: "application", explanation: "æ­¥é©Ÿ1ï¼š10 - 3 = 7å…ƒï¼ˆè²·ç³–æœå¾Œï¼‰ã€‚æ­¥é©Ÿ2ï¼š7 + 5 = 12å…ƒï¼ˆåª½åª½çµ¦éŒ¢å¾Œï¼‰ğŸ’" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "æ•™å®¤æœ‰4æ’æ¡Œå­ï¼Œæ¯æ’3å¼µï¼Œç¸½å…±å¹¾å¼µæ¡Œå­ï¼Ÿ", options: ["7å¼µ", "10å¼µ", "12å¼µ", "14å¼µ"], correct: 2, type: "application", explanation: "æƒ³åƒæ•™å®¤ï¼šç¬¬1æ’3å¼µ + ç¬¬2æ’3å¼µ + ç¬¬3æ’3å¼µ + ç¬¬4æ’3å¼µ = 3+3+3+3 = 12å¼µæ¡Œå­ï¼ğŸª‘" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "ä»Šå¤©æ˜ŸæœŸä¸‰ï¼Œéäº†5å¤©æ˜¯æ˜ŸæœŸå¹¾ï¼Ÿ", options: ["æ˜ŸæœŸæ—¥", "æ˜ŸæœŸä¸€", "æ˜ŸæœŸäºŒ", "æ˜ŸæœŸå…­"], correct: 1, type: "application", explanation: "å¾æ˜ŸæœŸä¸‰æ•¸5å¤©ï¼šå››(1)ã€äº”(2)ã€å…­(3)ã€æ—¥(4)ã€ä¸€(5)ï¼æ‰€ä»¥æ˜¯æ˜ŸæœŸä¸€ï¼ğŸ“…" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "å…¬è»Šä¸Šæœ‰8äººğŸ‘¥ï¼Œç¬¬ä¸€ç«™ä¸‹è»Š3äººï¼Œä¸Šè»Š5äººï¼Œç¾åœ¨å¹¾äººï¼Ÿ", options: ["8äºº", "9äºº", "10äºº", "11äºº"], correct: 2, type: "application", explanation: "åŸæœ¬8äºº â†’ ä¸‹è»Š3äººå‰©5äºº â†’ ä¸Šè»Š5äººè®Š10äººï¼ç®—å¼ï¼š8 - 3 + 5 = 10äºº ğŸšŒ" },
            
            // ä»£æ•¸ (3é¡Œ) - æ›´è¤‡é›œçš„æ¨¡å¼
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "æ‰¾è¦å¾‹ï¼š2, 4, 6, 8, ?", options: ["9", "10", "11", "12"], correct: 1, type: "algebra", explanation: "æ¯æ¬¡éƒ½åŠ 2ï¼š2â†’(+2)â†’4â†’(+2)â†’6â†’(+2)â†’8â†’(+2)â†’10ï¼é€™æ˜¯å¶æ•¸çš„è¦å¾‹ ğŸ”¢" },
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "å®Œæˆåœ–æ¡ˆï¼šğŸ”´ğŸ”µğŸ”µğŸ”´ğŸ”µğŸ”µ?", options: ["ğŸ”´", "ğŸ”µ", "ğŸŸ¡", "ğŸŸ¢"], correct: 0, type: "algebra", explanation: "è¦å¾‹æ˜¯ï¼š1å€‹ç´…2å€‹è—ï¼Œ1å€‹ç´…2å€‹è—...æ‰€ä»¥æ¥ä¸‹ä¾†æ˜¯ç´…è‰²ğŸ”´ï¼" },
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "å¦‚æœğŸ=3ï¼ŒğŸŒ=2ï¼Œé‚£ğŸ+ğŸŒ=?", options: ["4", "5", "6", "7"], correct: 1, type: "algebra", explanation: "æŠŠç¬¦è™Ÿæ›æˆæ•¸å­—ï¼šğŸæ˜¯3ï¼ŒğŸŒæ˜¯2ï¼Œæ‰€ä»¥3 + 2 = 5ï¼é€™å°±åƒå¯†ç¢¼éŠæˆ² ğŸ”" },
            
            // çµ„åˆ (3é¡Œ) - å¤šé‡æ¢ä»¶çš„åˆ†çµ„
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "å“ªäº›æ˜¯æœƒé£›çš„ï¼ŸğŸ¦…ğŸŸğŸ¦‹ğŸ˜ğŸ•Šï¸ğŸ›", options: ["ğŸ¦…ğŸ¦‹ğŸ•Šï¸", "ğŸŸğŸ˜ğŸ›", "ğŸ¦…ğŸŸğŸ¦‹", "ğŸ•Šï¸ğŸ˜ğŸ›"], correct: 0, type: "combination", explanation: "æœƒé£›çš„å‹•ç‰©ï¼šè€é·¹ğŸ¦…ã€è´è¶ğŸ¦‹ã€é´¿å­ğŸ•Šï¸éƒ½æœ‰ç¿…è†€å¯ä»¥é£›ï¼ğŸ›«" },
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "æŠŠç›¸åŒé¡è‰²å’Œå½¢ç‹€çš„é…å°ï¼šğŸ”´â­•ğŸ”µâ¬œğŸ”´â¬œğŸ”µâ­•", options: ["ğŸ”´â­•å’ŒğŸ”µâ­•", "ğŸ”´â¬œå’ŒğŸ”µâ¬œ", "ğŸ”´â­•å’ŒğŸ”´â¬œ", "éƒ½ä¸å°"], correct: 0, type: "combination", explanation: "ğŸ”´â­•å’ŒğŸ”µâ­•éƒ½æ˜¯åœ“å½¢ï¼ˆå½¢ç‹€ç›¸åŒï¼‰ï¼ŒğŸ”´â¬œå’ŒğŸ”µâ¬œéƒ½æ˜¯æ­£æ–¹å½¢ï¼ˆå½¢ç‹€ç›¸åŒï¼‰ï¼" },
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "å“ªçµ„å…¨éƒ¨éƒ½å¯ä»¥åƒï¼Ÿ", options: ["ğŸ•ğŸ”âš½", "ğŸ¾ğŸ€ğŸ", "ğŸ°ğŸªğŸ©", "ğŸš—ğŸšŒğŸš™"], correct: 2, type: "combination", explanation: "è›‹ç³•ğŸ°ã€é¤…ä¹¾ğŸªã€ç”œç”œåœˆğŸ©éƒ½æ˜¯ç¾å‘³çš„é£Ÿç‰©ï¼å…¶ä»–çµ„æœ‰çƒé¡æˆ–è»Šå­ï¼Œä¸èƒ½åƒå–”ï¼ğŸ˜‹" },
            
            // æ•¸æ„Ÿ (4é¡Œ) - æ›´æŠ½è±¡çš„æ•¸å­—æ¦‚å¿µ
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "å“ªå€‹æ•¸å­—åœ¨7å’Œ9ä¹‹é–“ï¼Ÿ", options: ["6", "8", "10", "5"], correct: 1, type: "number_sense", explanation: "æ•¸ç·šä¸Šï¼š...6-7-8-9-10...ï¼Œ8åœ¨7çš„å³é‚Šã€9çš„å·¦é‚Šï¼Œæ‰€ä»¥8åœ¨7å’Œ9ä¹‹é–“ï¼ğŸ“" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "æŠŠ10åˆ†æˆå…©çµ„ï¼Œä¸‹é¢å“ªå€‹å°ï¼Ÿ", options: ["3+8", "4+6", "2+7", "5+6"], correct: 1, type: "number_sense", explanation: "æª¢æŸ¥æ¯å€‹ï¼š3+8=11(âŒ)ã€4+6=10(âœ…)ã€2+7=9(âŒ)ã€5+6=11(âŒ)ã€‚åªæœ‰4+6=10ï¼ğŸ¯" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "å¾å¤§åˆ°å°æ’åˆ—ï¼š7, 3, 9, 5", options: ["9, 7, 5, 3", "3, 5, 7, 9", "7, 9, 3, 5", "5, 3, 9, 7"], correct: 0, type: "number_sense", explanation: "æ‰¾æœ€å¤§çš„9ï¼Œç„¶å¾Œ7ï¼Œç„¶å¾Œ5ï¼Œæœ€å°çš„3ã€‚åƒæ’éšŠå¾é«˜åˆ°çŸ®ï¼š9â†’7â†’5â†’3 ğŸ“Š" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "ä¸€æ‰“é‰›ç­†æœ‰12æ”¯ï¼ŒåŠæ‰“æœ‰å¹¾æ”¯ï¼Ÿ", options: ["4æ”¯", "6æ”¯", "8æ”¯", "10æ”¯"], correct: 1, type: "number_sense", explanation: "åŠæ‰“å°±æ˜¯ä¸€æ‰“çš„ä¸€åŠï¼š12 Ã· 2 = 6æ”¯ï¼å°±åƒæŠŠ12æ”¯é‰›ç­†å¹³å‡åˆ†æˆ2å † âœï¸âœï¸" }
        ];

        const appContainer = document.getElementById('app');

        // Function to handle user's answer
        function handleAnswer(selectedIndex) {
            answers[currentQuestionIndex] = selectedIndex;
            renderApp(); // Re-render to show feedback

            if (currentQuestionIndex < questions.length - 1) {
                setTimeout(() => {
                    currentQuestionIndex++;
                    renderApp();
                }, 1500); // Wait 1.5 seconds for harder questions
            } else {
                setTimeout(() => {
                    showResult = true;
                    renderApp();
                }, 1500);
            }
        }

        // Function to restart the quiz
        function restartQuiz() {
            currentQuestionIndex = 0;
            answers = {};
            showResult = false;
            renderApp();
        }

        // Function to calculate final results
        function calculateResults() {
            const results = {
                calculation: { correct: 0, total: 0 },
                geometry: { correct: 0, total: 0 },
                application: { correct: 0, total: 0 },
                algebra: { correct: 0, total: 0 },
                combination: { correct: 0, total: 0 },
                number_sense: { correct: 0, total: 0 }
            };

            questions.forEach((question, index) => {
                const type = question.type;
                results[type].total++;
                if (answers[index] === question.correct) {
                    results[type].correct++;
                }
            });
            return results;
        }

        // Main function to render the UI
        function renderApp() {
            // Set an advanced gradient background
            document.body.className = 'bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-600';

            if (showResult) {
                renderResultScreen();
            } else {
                renderQuestionScreen();
            }
        }

        // Renders the question view
        function renderQuestionScreen() {
            const question = questions[currentQuestionIndex];
            const selectedAnswer = answers[currentQuestionIndex];
            const isAnswered = selectedAnswer !== undefined;

            const optionsHtml = question.options.map((option, index) => {
                let buttonClass = 'bg-white border-gray-300 text-gray-700 hover:shadow-lg cursor-pointer';
                let icon = '';

                if (isAnswered) {
                    if (index === question.correct) {
                        buttonClass = 'bg-green-200 border-green-400 text-green-800';
                        icon = '<span class="inline-block ml-2">âœ…</span>';
                    } else if (index === selectedAnswer) {
                        buttonClass = 'bg-red-200 border-red-400 text-red-800';
                        icon = '<span class="inline-block ml-2">âŒ</span>';
                    } else {
                        buttonClass = 'bg-gray-200 border-gray-300 text-gray-600';
                    }
                }

                return `
                    <button
                        onclick="${isAnswered ? '' : `handleAnswer(${index})`}"
                        ${isAnswered ? 'disabled' : ''}
                        class="p-4 sm:p-6 rounded-2xl option-text font-bold border-4 transition-all duration-200 transform hover:scale-105 ${buttonClass}"
                    >
                        ${option} ${icon}
                    </button>
                `;
            }).join('');

            appContainer.innerHTML = `
                <div class="max-w-2xl mx-auto">
                    <!-- Advanced Badge -->
                    <div class="text-center mb-4">
                        <span class="inline-block bg-yellow-400 text-yellow-900 px-6 py-3 rounded-full font-bold text-xl sparkle">
                            ğŸŒŸ é€²éšæŒ‘æˆ° ğŸŒŸ
                        </span>
                    </div>

                    <!-- Progress Bar -->
                    <div class="bg-white bg-opacity-20 rounded-full p-2 mb-6">
                        <div 
                            class="bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full h-4 transition-all duration-500"
                            style="width: ${((currentQuestionIndex + 1) / questions.length) * 100}%"
                        ></div>
                    </div>

                    <div class="text-center text-white text-xl mb-4">
                        é¡Œç›® ${currentQuestionIndex + 1} / ${questions.length}
                    </div>

                    <!-- Question Card -->
                    <div class="${question.color} rounded-3xl shadow-2xl p-6 sm:p-8 border-4">
                        <div class="text-center mb-6">
                            <div class="text-3xl font-bold text-gray-700 mb-4">
                                ${question.category}
                            </div>
                            <div class="question-text font-bold text-gray-800 mb-6 min-h-[8rem] flex items-center justify-center">
                                ${question.question}
                            </div>
                        </div>

                        <!-- Answer Options -->
                        <div class="grid grid-cols-2 gap-4">
                            ${optionsHtml}
                        </div>

                        ${isAnswered ? `
                            <div class="mt-6">
                                <div class="text-center text-3xl sm:text-4xl font-bold mb-2">
                                    ${selectedAnswer === question.correct ? "ğŸ‰ ç­”å°äº†ï¼" : "ğŸ’ª å†æƒ³æƒ³çœ‹ï¼"}
                                </div>
                                ${question.explanation ? `
                                    <div class="bg-white bg-opacity-50 rounded-xl p-4 mt-4">
                                        <div class="text-sm font-bold text-gray-700 mb-1">ğŸ’¡ å°æç¤ºï¼š</div>
                                        <div class="text-sm text-gray-600">${question.explanation}</div>
                                    </div>
                                ` : ''}
                                <div class="text-center text-lg text-gray-600 mt-2">
                                    ${currentQuestionIndex < questions.length - 1 ? 'æº–å‚™ä¸‹ä¸€é¡Œ...' : 'è¨ˆç®—çµæœä¸­...'}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }
        
        // Renders the result view
        function renderResultScreen() {
            const results = calculateResults();
            const totalCorrect = Object.values(results).reduce((sum, r) => sum + r.correct, 0);
            const totalQuestions = questions.length;
            const scorePercentage = totalCorrect / totalQuestions;
            
            let resultEmoji = "ğŸ’ª";
            let resultMessage = "ç¹¼çºŒåŠªåŠ›ï¼é€²éšé¡Œç›®ä¸ç°¡å–®å‘¢ï¼ğŸ“š";
            let starCount = 1;

            if (scorePercentage >= 0.9) {
                resultEmoji = "ğŸ†";
                resultMessage = "å¤ªå²å®³äº†ï¼ä½ æ˜¯æ•¸å­¸å°åšå£«ï¼ğŸ“";
                starCount = 5;
            } else if (scorePercentage >= 0.7) {
                resultEmoji = "ğŸ‰";
                resultMessage = "å¾ˆæ£’ï¼ä½ å·²ç¶“æŒæ¡é€²éšæ•¸å­¸äº†ï¼ğŸŒŸ";
                starCount = 4;
            } else if (scorePercentage >= 0.5) {
                resultEmoji = "ğŸ˜Š";
                resultMessage = "ä¸éŒ¯å–”ï¼ç¹¼çºŒç·´ç¿’æœƒæ›´å¥½ï¼ğŸ’";
                starCount = 3;
            }

            const categoryResultsHtml = Object.keys(results).map(key => {
                const categoryMap = {
                    calculation: { name: "ğŸ§® è¨ˆç®—", style: "bg-red-50 border-red-200 text-red-600" },
                    geometry: { name: "ğŸ”º å¹¾ä½•", style: "bg-blue-50 border-blue-200 text-blue-600" },
                    application: { name: "ğŸ›’ æ‡‰ç”¨", style: "bg-green-50 border-green-200 text-green-600" },
                    algebra: { name: "ğŸ¨ ä»£æ•¸", style: "bg-purple-50 border-purple-200 text-purple-600" },
                    combination: { name: "ğŸ§© çµ„åˆ", style: "bg-yellow-50 border-yellow-200 text-yellow-600" },
                    number_sense: { name: "ğŸ”¢ æ•¸æ„Ÿ", style: "bg-pink-50 border-pink-200 text-pink-600" },
                };
                const info = categoryMap[key];
                const percentage = results[key].total > 0 ? Math.round((results[key].correct / results[key].total) * 100) : 0;
                return `
                    <div class="${info.style} p-4 rounded-xl border-2">
                        <div class="text-lg font-bold">${info.name}</div>
                        <div class="text-xl font-bold">${results[key].correct}/${results[key].total}</div>
                        <div class="text-sm">æ­£ç¢ºç‡ ${percentage}%</div>
                    </div>
                `;
            }).join('');

            const starsHtml = Array(starCount).fill('â­').join(' ');

            appContainer.innerHTML = `
                <div class="max-w-2xl mx-auto">
                    <div class="bg-white rounded-3xl shadow-2xl p-8 text-center">
                        <div class="text-7xl mb-4">${resultEmoji}</div>
                        
                        <h2 class="text-3xl font-bold text-gray-800 mb-2">é€²éšæ¸¬é©—å®Œæˆï¼</h2>
                        <div class="text-5xl mb-4">${starsHtml}</div>
                        
                        <div class="text-2xl font-bold text-purple-600 mb-6">
                            ç¸½åˆ†ï¼š${totalCorrect} / ${totalQuestions}
                        </div>

                        <div class="bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-4 mb-6">
                            <div class="text-lg font-bold text-gray-700">æ­£ç¢ºç‡ï¼š${Math.round(scorePercentage * 100)}%</div>
                        </div>

                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6">
                           ${categoryResultsHtml}
                        </div>

                        <div class="text-2xl mb-6 font-bold text-gray-700">
                            ${resultMessage}
                        </div>

                        <div class="flex gap-4 justify-center">
                            <button
                                onclick="restartQuiz()"
                                class="bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xl font-bold py-4 px-8 rounded-2xl hover:shadow-lg transform hover:scale-105 transition-all duration-200"
                            >
                                å†æŒ‘æˆ°ä¸€æ¬¡ ğŸ®
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // Initial render to start the quiz
        renderApp();

    </script>
</body>
</html>