<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…­æ­²æ•¸å­¸ç¥è«­æ¸¬é©—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #0c0a18;
            background-image: url('https://www.transparenttextures.com/patterns/stardust.png');
        }
        #app > div {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        .oracle-badge {
            animation: cosmic-glow 4s infinite ease-in-out;
        }
        @keyframes cosmic-glow {
            0%, 100% {
                transform: scale(1);
                text-shadow: 0 0 15px #fff, 0 0 25px #a78bfa, 0 0 40px #a78bfa;
            }
            50% {
                transform: scale(1.05);
                text-shadow: 0 0 25px #fff, 0 0 50px #c4b5fd, 0 0 75px #c4b5fd;
            }
        }
        .question-text {
            font-size: 1.75rem;
            line-height: 2.25rem;
        }
        .option-text {
            font-size: 1.5rem;
        }
        @media (min-width: 640px) {
            .question-text {
                font-size: 2.25rem;
                line-height: 2.5rem;
            }
            .option-text {
                font-size: 1.75rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="app" class="min-h-screen p-4">
        <!-- The quiz will be rendered here by JavaScript -->
    </div>

    <script>
        // State variables to manage the quiz
        let currentQuestionIndex = 0;
        let answers = {};
        let showResult = false;

        // Oracle level quiz questions for 6-year-olds
        const questions = [
            // è¨ˆç®— (3é¡Œ) - è² æ•¸ã€é›å…”åŒç± 
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-200 border-red-400", question: "æˆ‘æœ‰5å…ƒï¼Œä½†æƒ³è²·8å…ƒçš„æ±è¥¿ï¼Œæˆ‘é‚„å·®å¤šå°‘éŒ¢ï¼Ÿ", options: ["å·®3å…ƒ", "å·®8å…ƒ", "å·®13å…ƒ", "å¤ äº†"], correct: 1, type: "calculation", explanation: "ç•¶ä½ æ“æœ‰çš„ä¸å¤ æ”¯ä»˜æ™‚ï¼Œå°±æœƒå‡ºç¾è² æ•¸ã€‚5 - 8 = -3ï¼Œä»£è¡¨ä½ é‚„æ¬ 3å…ƒã€‚" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-200 border-red-400", question: "ä¸€å€‹ç± å­è£¡æœ‰é›å’Œè²“ï¼Œç¸½å…±æœ‰3å€‹é ­ï¼Œ8éš»è…³ã€‚è«‹å•æœ‰å¹¾éš»é›ã€å¹¾éš»è²“ï¼Ÿ", options: ["3é›0è²“", "1é›2è²“", "2é›1è²“", "0é›3è²“"], correct: 2, type: "calculation", explanation: "é€™é¡Œéœ€è¦æ¨ç†ï¼2éš»é›æœ‰4éš»è…³ï¼Œ1éš»è²“æœ‰4éš»è…³ï¼ŒåŠ èµ·ä¾†å‰›å¥½æ˜¯8éš»è…³å’Œ3å€‹é ­ã€‚" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-200 border-red-400", question: "1/2 + 1/4 = ?", options: ["2/6", "1/8", "3/4", "1"], correct: 2, type: "calculation", explanation: "æƒ³åƒä¸€å€‹æŠ«è–©ï¼Œä¸€åŠ(1/2)æ˜¯4ç‰‡ï¼Œå››åˆ†ä¹‹ä¸€(1/4)æ˜¯2ç‰‡ï¼ŒåŠ èµ·ä¾†æ˜¯6ç‰‡ï¼Œä¹Ÿå°±æ˜¯3/4å€‹æŠ«è–©ã€‚" },
            
            // å¹¾ä½• (3é¡Œ) - é«”ç©ã€åº§æ¨™
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-200 border-blue-400", question: "ä¸€å€‹ç©ºç“¶å­å’Œä¸€å€‹è£æ»¿æ°´çš„ç“¶å­ï¼Œå“ªå€‹æ¯”è¼ƒé‡ï¼Ÿ", options: ["ç©ºç“¶å­", "è£æ»¿æ°´çš„ç“¶å­", "ä¸€æ¨£é‡", "ä¸ä¸€å®š"], correct: 1, type: "geometry", explanation: "æ°´æœ‰é‡é‡ï¼Œæ‰€ä»¥è£äº†æ°´çš„ç“¶å­æœƒæ¯”ç©ºçš„ç“¶å­æ›´é‡ã€‚é€™å°±æ˜¯è³ªé‡å’Œé«”ç©çš„æ¦‚å¿µã€‚" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-200 border-blue-400", question: "ä¸€å€‹æ­£æ–¹é«”æœ‰å¤šå°‘æ¢é‚Šï¼Ÿ", options: ["6æ¢", "8æ¢", "10æ¢", "12æ¢"], correct: 3, type: "geometry", explanation: "æ­£æ–¹é«”æœ‰8å€‹é ‚é»å’Œ6å€‹é¢ï¼Œé€£æ¥é€™äº›é ‚é»çš„ç·šå°±æ˜¯é‚Šï¼Œç¸½å…±æœ‰12æ¢é‚Šã€‚" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-200 border-blue-400", question: "å¦‚æœ(0,0)æ˜¯å…¬åœ’ï¼Œä½ å¾€å³èµ°2æ­¥ï¼Œå†å¾€ä¸Šèµ°3æ­¥ï¼Œä½ ç¾åœ¨åœ¨å“ªå€‹åº§æ¨™ï¼Ÿ", options: ["(3,2)", "(2,3)", "(-2,-3)", "(0,5)"], correct: 1, type: "geometry", explanation: "å¾€å³èµ°æ˜¯Xè»¸æ­£å‘ï¼Œå¾€ä¸Šèµ°æ˜¯Yè»¸æ­£å‘ã€‚æ‰€ä»¥åº§æ¨™æ˜¯(2,3)ã€‚" },
            
            // æ‡‰ç”¨ (4é¡Œ) - é€Ÿç‡ã€å¤šé‡é‚è¼¯
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-200 border-green-400", question: "æˆ‘æ¯åˆ†é˜èµ°50å…¬å°ºï¼Œèµ°äº†3åˆ†é˜ï¼Œç¸½å…±èµ°äº†å¤šé ï¼Ÿ", options: ["53å…¬å°º", "100å…¬å°º", "150å…¬å°º", "200å…¬å°º"], correct: 2, type: "application", explanation: "é€Ÿç‡ x æ™‚é–“ = è·é›¢ã€‚50å…¬å°º/åˆ†é˜ x 3åˆ†é˜ = 150å…¬å°ºã€‚" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-200 border-green-400", question: "å¦‚æœæ˜¨å¤©æ˜¯å¾Œå¤©ï¼Œé‚£ä»Šå¤©æ˜¯æ˜ŸæœŸäº”ã€‚è«‹å•ã€ŒçœŸæ­£çš„ã€ä»Šå¤©æ˜ŸæœŸå¹¾ï¼Ÿ", options: ["æ˜ŸæœŸä¸‰", "æ˜ŸæœŸå››", "æ˜ŸæœŸäº”", "æ˜ŸæœŸæ—¥"], correct: 0, type: "application", explanation: "é€™æ˜¯ä¸€å€‹è…¦ç­‹æ€¥è½‰å½ï¼å¦‚æœã€Œæ˜¨å¤©æ˜¯å¾Œå¤©ã€ï¼Œä»£è¡¨åŸºæº–æ—¥æ¯”ã€ŒçœŸæ­£çš„ã€ä»Šå¤©æ—©äº†3å¤©ã€‚æ‰€ä»¥å¾æ˜ŸæœŸäº”å€’æ¨3å¤©ï¼Œå°±æ˜¯æ˜ŸæœŸäºŒï¼Œé‚£ã€ŒçœŸæ­£çš„ã€ä»Šå¤©å°±æ˜¯æ˜ŸæœŸä¸‰ã€‚" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-200 border-green-400", question: "æœ‰ä¸‰å…„å¼Ÿï¼Œç”²èªªçš„éƒ½æ˜¯çœŸè©±ï¼Œä¹™èªªçš„éƒ½æ˜¯å‡è©±ï¼Œä¸™æœ‰æ™‚èªªçœŸè©±æœ‰æ™‚èªªå‡è©±ã€‚ä½ å•æˆ´ç´…å¸½çš„æ˜¯èª°ï¼Œä¹™æŒ‡è‘—ç”²èªªï¼šã€æ˜¯ä»–ã€ã€‚è«‹å•èª°æˆ´ç´…å¸½ï¼Ÿ", options: ["ç”²", "ä¹™", "ä¸™", "ç„¡æ³•ç¢ºå®š"], correct: 2, type: "application", explanation: "ä¹™èªªçš„éƒ½æ˜¯å‡è©±ï¼Œæ‰€ä»¥ä»–èªªã€æ˜¯ç”²ã€ä¸€å®šæ˜¯å‡çš„ã€‚å› æ­¤æˆ´ç´…å¸½çš„ä¸æ˜¯ç”²ã€‚ä¹™è‡ªå·±ä¹Ÿä¸å¯èƒ½æˆ´ç´…å¸½ï¼ˆå¦å‰‡ä»–å°±èªªçœŸè©±äº†ï¼‰ã€‚æ‰€ä»¥ï¼Œæˆ´ç´…å¸½çš„åªå¯èƒ½æ˜¯ä¸™ã€‚" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-200 border-green-400", question: "10å€‹å·¥äººè“‹ä¸€æ£Ÿæˆ¿å­è¦20å¤©ï¼Œå¦‚æœå¢åŠ åˆ°20å€‹å·¥äººï¼Œéœ€è¦å¹¾å¤©ï¼Ÿ(å‡è¨­å¤§å®¶æ•ˆç‡ä¸€æ¨£)", options: ["5å¤©", "10å¤©", "20å¤©", "40å¤©"], correct: 1, type: "application", explanation: "å·¥äººè®Šå…©å€ï¼Œæ•ˆç‡ä¹Ÿè®Šå…©å€ï¼Œæ‰€ä»¥æ™‚é–“æœƒæ¸›åŠã€‚20å¤© Ã· 2 = 10å¤©ã€‚" },

            // ä»£æ•¸ (3é¡Œ) - å‡½æ•¸ã€æ–¹ç¨‹çµ„
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-200 border-purple-400", question: "ä¸€å€‹ç¥ç§˜æ©Ÿå™¨ï¼Œæ”¾é€²3å‡ºä¾†9ï¼Œæ”¾é€²5å‡ºä¾†15ã€‚å¦‚æœæ”¾é€²4ï¼Œæœƒå‡ºä¾†å¤šå°‘ï¼Ÿ", options: ["10", "11", "12", "13"], correct: 2, type: "algebra", explanation: "é€™å€‹æ©Ÿå™¨çš„è¦å‰‡æ˜¯æŠŠæ”¾é€²å»çš„æ•¸å­—ä¹˜ä»¥3ã€‚æ‰€ä»¥ 4 x 3 = 12ã€‚" },
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-200 border-purple-400", question: "â­ï¸ + ğŸŒ™ = 10, â­ï¸ - ğŸŒ™ = 4ã€‚è«‹å• â­ï¸ æ˜¯å¤šå°‘ï¼Ÿ", options: ["5", "6", "7", "8"], correct: 2, type: "algebra", explanation: "ä½ å¯ä»¥è©¦è©¦çœ‹ï¼Œ7+3=10ï¼Œè€Œä¸”7-3=4ã€‚æ‰€ä»¥æ˜Ÿæ˜Ÿâ­ï¸ä»£è¡¨çš„æ•¸å­—æ˜¯7ã€‚" },
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-200 border-purple-400", question: "æ‰¾è¦å¾‹ï¼š1, 4, 9, 16, ?", options: ["20", "22", "25", "36"], correct: 2, type: "algebra", explanation: "é€™å€‹æ•¸åˆ—æ˜¯æ•¸å­—çš„è‡ªæˆ‘ç›¸ä¹˜ï¼š1x1=1, 2x2=4, 3x3=9, 4x4=16, æ‰€ä»¥ä¸‹ä¸€å€‹æ˜¯ 5x5=25ã€‚" },
            
            // çµ„åˆ (3é¡Œ) - é‚è¼¯æ‚–è«–
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-200 border-yellow-400", question: "çš®è«¾ä¸˜æ¯æ¬¡éƒ½æœƒèªªè¬Šè©±ï¼Œä½†æ˜¯èªªè¬Šçš„è©±ï¼Œé¼»å­æœƒè®Šé•·ã€‚ä»–ä»Šå¤©èªªï¼šã€æˆ‘çš„é¼»å­ç¾åœ¨æœƒè®Šé•·ã€‚ã€è«‹å•ä»–çš„é¼»å­æœƒç™¼ç”Ÿä»€éº¼äº‹ï¼Ÿ", options: ["è®Šé•·", "ä¸è®Š", "è®ŠçŸ­", "ç„¡æ³•åˆ¤æ–·/çŸ›ç›¾"], correct: 3, type: "combination", explanation: "é€™åˆæ˜¯ä¸€å€‹æ‚–è«–ï¼å¦‚æœé¼»å­è®Šé•·ï¼Œä»£è¡¨ä»–èªªçš„æ˜¯çœŸè©±ï¼Œä½†é¼»å­åªæœ‰åœ¨èªªè¬Šæ™‚æ‰æœƒè®Šé•·ã€‚å¦‚æœé¼»å­ä¸è®Šï¼Œä»£è¡¨ä»–èªªçš„æ˜¯å‡è©±ï¼Œä½†é¼»å­æ‡‰è©²è¦è®Šé•·ã€‚æ‰€ä»¥é€™æ˜¯ä¸€å€‹çŸ›ç›¾çš„ç‹€æ³ï¼" },
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-200 border-yellow-400", question: "ä¸€å€‹æ‘èŠè£¡ï¼Œç†é«®å¸«åªå¹«æ‰€æœ‰ã€Œä¸è‡ªå·±åˆ®é¬å­ã€çš„æ‘æ°‘åˆ®é¬å­ã€‚è«‹å•ç†é«®å¸«è‡ªå·±çš„é¬å­èª°ä¾†åˆ®ï¼Ÿ", options: ["ä»–è‡ªå·±åˆ®", "åˆ¥çš„ç†é«®å¸«", "ä»–ä¸åˆ®é¬å­", "ç„¡æ³•åˆ¤æ–·/çŸ›ç›¾"], correct: 3, type: "combination", explanation: "ç†é«®å¸«æ‚–è«–ï¼å¦‚æœä»–è‡ªå·±åˆ®ï¼Œé‚£ä»–å°±å±¬æ–¼ã€Œè‡ªå·±åˆ®é¬å­ã€çš„äººï¼Œä½†ä»–ä¸èƒ½å¹«é€™ç¨®äººåˆ®ã€‚å¦‚æœä»–ä¸è‡ªå·±åˆ®ï¼Œé‚£ä»–å°±å±¬æ–¼ã€Œä¸è‡ªå·±åˆ®é¬å­ã€çš„äººï¼Œä»–æ‡‰è©²è¦å¹«è‡ªå·±åˆ®ã€‚é€™åˆæ˜¯ä¸€å€‹çŸ›ç›¾ï¼" },
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-200 border-yellow-400", question: "æœ‰5å€‹æµ·ç›œåˆ†100æšé‡‘å¹£ï¼Œæœ€è²ªå©ªçš„å¤§å“¥æè­°ï¼Œå¦‚æœè¶…éä¸€åŠçš„äººåå°ä»–ï¼Œä»–å°±å¾—æ­»ã€‚ä»–è¦æ€éº¼åˆ†æ‰èƒ½æ‹¿åˆ°æœ€å¤šé‡‘å¹£åˆä¸æœƒæ­»ï¼Ÿ", options: ["è‡ªå·±æ‹¿100", "å¹³åˆ†", "è‡ªå·±98ï¼Œçµ¦3è™Ÿ1ï¼Œçµ¦5è™Ÿ1", "è‡ªå·±97ï¼Œçµ¦2,3,4è™Ÿå„1"], correct: 2, type: "combination", explanation: "é€™æ˜¯å€‹ç¶“å…¸çš„è³½å±€ç†è«–å•é¡Œï¼ä»–åªè¦èªªæœå…©å€‹äººï¼ˆåŠ ä¸Šè‡ªå·±å°±è¶…éä¸€åŠäº†ï¼‰ï¼Œæ‰€ä»¥ä»–å¯ä»¥çµ¦æœ€æ²’åœ°ä½çš„3è™Ÿå’Œ5è™Ÿå„1æšé‡‘å¹£ï¼Œè‡ªå·±ç¨å98æšï¼" },
            
            // æ•¸æ„Ÿ (3é¡Œ) - ç„¡é™ã€è³ªæ•¸
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-200 border-pink-400", question: "æ•¸å­—å¯ä»¥ä¸€ç›´æ•¸ä¸‹å»ï¼Œæ°¸ä¸åœæ­¢ã€‚é€™å€‹æ¦‚å¿µç¨±ç‚ºä»€éº¼ï¼Ÿ", options: ["å¾ˆå¤§", "å¾ˆå¤š", "ç„¡é™", "æ²’æœ‰ç›¡é ­"], correct: 2, type: "number_sense", explanation: "ç•¶ä¸€å€‹æ±è¥¿æ²’æœ‰çµæŸã€æ²’æœ‰é‚Šç•Œæ™‚ï¼Œæˆ‘å€‘ç¨±ä¹‹ç‚ºã€Œç„¡é™(Infinity)ã€ã€‚" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-200 border-pink-400", question: "åœ¨1åˆ°10ä¹‹é–“ï¼Œæœ‰å¹¾å€‹ã€Œè³ªæ•¸ã€(åªèƒ½è¢«1å’Œè‡ªå·±æ•´é™¤çš„æ•¸)ï¼Ÿ", options: ["3å€‹ (2,5,7)", "4å€‹ (2,3,5,7)", "5å€‹ (1,2,3,5,7)", "2å€‹ (1,3)"], correct: 1, type: "number_sense", explanation: "1ä¸æ˜¯è³ªæ•¸ã€‚åœ¨1åˆ°10ä¹‹é–“ï¼Œè³ªæ•¸æœ‰2, 3, 5, 7ï¼Œç¸½å…±4å€‹ã€‚" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-200 border-pink-400", question: "0.5 å’Œ 1/2 èª°æ¯”è¼ƒå¤§ï¼Ÿ", options: ["0.5", "1/2", "ä¸€æ¨£å¤§", "ä¸èƒ½æ¯”"], correct: 2, type: "number_sense", explanation: "0.5å°±æ˜¯ã€Œä¸€åŠã€çš„å°æ•¸å¯«æ³•ï¼Œ1/2æ˜¯ã€Œä¸€åŠã€çš„åˆ†æ•¸å¯«æ³•ï¼Œå®ƒå€‘ä»£è¡¨çš„å¤§å°å®Œå…¨ä¸€æ¨£ï¼" }
        ];

        const appContainer = document.getElementById('app');

        function handleAnswer(selectedIndex) {
            answers[currentQuestionIndex] = selectedIndex;
            renderApp(); 

            if (currentQuestionIndex < questions.length - 1) {
                setTimeout(() => {
                    currentQuestionIndex++;
                    renderApp();
                }, 3000); 
            } else {
                setTimeout(() => {
                    showResult = true;
                    renderApp();
                }, 3000);
            }
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            answers = {};
            showResult = false;
            renderApp();
        }

        function calculateResults() {
            const results = {
                calculation: { correct: 0, total: 0 },
                geometry: { correct: 0, total: 0 },
                application: { correct: 0, total: 0 },
                algebra: { correct: 0, total: 0 },
                combination: { correct: 0, total: 0 },
                number_sense: { correct: 0, total: 0 }
            };

            questions.forEach((question, index) => {
                const type = question.type;
                results[type].total++;
                if (answers[index] === question.correct) {
                    results[type].correct++;
                }
            });
            return results;
        }

        function renderApp() {
            document.body.className = 'bg-gradient-to-br from-[#0c0a18] via-[#1a1a2e] to-[#2a2a4e]';

            if (showResult) {
                renderResultScreen();
            } else {
                renderQuestionScreen();
            }
        }

        function renderQuestionScreen() {
            const question = questions[currentQuestionIndex];
            const selectedAnswer = answers[currentQuestionIndex];
            const isAnswered = selectedAnswer !== undefined;

            const optionsHtml = question.options.map((option, index) => {
                let buttonClass = 'bg-gray-800 bg-opacity-50 border-purple-400 text-white hover:bg-purple-900 hover:border-purple-300 cursor-pointer';
                let icon = '';

                if (isAnswered) {
                    if (index === question.correct) {
                        buttonClass = 'bg-green-500 border-green-400 text-white';
                        icon = '<span class="inline-block ml-2">ğŸŒŒ</span>';
                    } else if (index === selectedAnswer) {
                        buttonClass = 'bg-red-800 border-red-600 text-white';
                        icon = '<span class="inline-block ml-2">ğŸŒ€</span>';
                    } else {
                        buttonClass = 'bg-gray-900 border-gray-700 text-gray-500';
                    }
                }

                return `
                    <button
                        onclick="${isAnswered ? '' : `handleAnswer(${index})`}"
                        ${isAnswered ? 'disabled' : ''}
                        class="p-4 sm:p-6 rounded-2xl option-text font-bold border-4 transition-all duration-300 transform hover:scale-105 ${buttonClass}"
                    >
                        ${option} ${icon}
                    </button>
                `;
            }).join('');

            appContainer.innerHTML = `
                <div class="max-w-2xl mx-auto">
                    <div class="text-center mb-4">
                        <span class="inline-block bg-clip-text text-transparent bg-gradient-to-r from-purple-400 via-pink-400 to-indigo-400 px-6 py-3 font-bold text-4xl oracle-badge">
                            ğŸ”® ç¥è«­æŒ‘æˆ° ğŸ”®
                        </span>
                    </div>

                    <div class="bg-gray-700 bg-opacity-50 rounded-full p-2 mb-6">
                        <div 
                            class="bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-full h-4 transition-all duration-500"
                            style="width: ${((currentQuestionIndex + 1) / questions.length) * 100}%"
                        ></div>
                    </div>

                    <div class="text-center text-white text-xl mb-4">
                        é¡Œç›® ${currentQuestionIndex + 1} / ${questions.length}
                    </div>

                    <div class="bg-gray-800 bg-opacity-70 backdrop-blur-sm rounded-3xl shadow-2xl p-6 sm:p-8 border-4 border-indigo-500">
                        <div class="text-center mb-6">
                            <div class="text-3xl font-bold text-indigo-300 mb-4">
                                ${question.category}
                            </div>
                            <div class="question-text font-bold text-white mb-6 min-h-[8rem] flex flex-col items-center justify-center">
                                ${question.question}
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            ${optionsHtml}
                        </div>

                        ${isAnswered ? `
                            <div class="mt-6">
                                <div class="text-center text-3xl sm:text-4xl font-bold mb-2 text-white">
                                    ${selectedAnswer === question.correct ? "ğŸª æ€ç¶­å·²é”å®‡å®™ç´šï¼" : "âš›ï¸ é€™å·²æ˜¯çŸ¥è­˜çš„é‚Šç•Œï¼"}
                                </div>
                                ${question.explanation ? `
                                    <div class="bg-gray-900 bg-opacity-80 rounded-xl p-4 mt-4">
                                        <div class="text-lg font-bold text-indigo-300 mb-1">ğŸ’¡ ç¥è«­è§£æï¼š</div>
                                        <div class.base text-gray-200">${question.explanation}</div>
                                    </div>
                                ` : ''}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }
        
        function renderResultScreen() {
            const results = calculateResults();
            const totalCorrect = Object.values(results).reduce((sum, r) => sum + r.correct, 0);
            const totalQuestions = questions.length;
            const scorePercentage = totalCorrect / totalQuestions;
            
            let resultEmoji = "ğŸ—¿";
            let resultMessage = "ä½ å·²çªºè¦‹çŸ¥è­˜çš„å¥§ç§˜ï¼Œé€™æœ¬èº«å°±æ˜¯ä¸€å ´å‰å¤§çš„å‹åˆ©ï¼";
            let starCount = 4;

            if (scorePercentage >= 0.8) {
                resultEmoji = "âœ¨";
                resultMessage = "ç„¡æ³•ç½®ä¿¡ï¼ä½ çš„å¿ƒæ™ºå·²èˆ‡å®‡å®™åŒé »ï¼";
                starCount = 5;
            } else if (scorePercentage >= 0.6) {
                resultEmoji = "ğŸª";
                resultMessage = "è¶…å‡¡çš„æ™ºæ…§ï¼ä½ å·²æŒæ¡äº†å®‡å®™çš„æ³•å‰‡ï¼";
                starCount = 4;
            } else if (scorePercentage >= 0.4) {
                resultEmoji = "â˜„ï¸";
                resultMessage = "å‚‘å‡ºçš„æŒ‘æˆ°è€…ï¼ä½ æ•¢æ–¼é¢å°æœ€æ·±å¥§çš„è¬é¡Œï¼";
                starCount = 3;
            }

            const categoryResultsHtml = Object.keys(results).map(key => {
                const categoryMap = {
                    calculation: { name: "ğŸ§® è¨ˆç®—", style: "bg-red-900 bg-opacity-50 border-red-700 text-red-200" },
                    geometry: { name: "ğŸ”º å¹¾ä½•", style: "bg-blue-900 bg-opacity-50 border-blue-700 text-blue-200" },
                    application: { name: "ğŸ›’ æ‡‰ç”¨", style: "bg-green-900 bg-opacity-50 border-green-700 text-green-200" },
                    algebra: { name: "ğŸ¨ ä»£æ•¸", style: "bg-purple-900 bg-opacity-50 border-purple-700 text-purple-200" },
                    combination: { name: "ğŸ§© çµ„åˆ", style: "bg-yellow-900 bg-opacity-50 border-yellow-700 text-yellow-200" },
                    number_sense: { name: "ğŸ”¢ æ•¸æ„Ÿ", style: "bg-pink-900 bg-opacity-50 border-pink-700 text-pink-200" },
                };
                const info = categoryMap[key];
                return `
                    <div class="${info.style} p-4 rounded-xl border-2">
                        <div class="text-lg font-bold">${info.name}</div>
                        <div class="text-xl font-bold">${results[key].correct}/${results[key].total}</div>
                    </div>
                `;
            }).join('');

            const starsHtml = Array(starCount).fill('ğŸ”®').join(' ');

            appContainer.innerHTML = `
                <div class="max-w-2xl mx-auto">
                    <div class="bg-gray-800 bg-opacity-70 backdrop-blur-sm rounded-3xl shadow-2xl p-8 text-center border-4 border-purple-400">
                        <div class="text-7xl mb-4">${resultEmoji}</div>
                        
                        <h2 class="text-3xl font-bold text-white mb-2">ç¥è«­æŒ‘æˆ°å®Œæˆï¼</h2>
                        <div class="text-5xl mb-4">${starsHtml}</div>
                        
                        <div class="text-2xl font-bold text-purple-300 mb-6">
                            ç¸½åˆ†ï¼š${totalCorrect} / ${totalQuestions}
                        </div>

                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6">
                           ${categoryResultsHtml}
                        </div>

                        <div class="text-2xl mb-6 font-bold text-white">
                            ${resultMessage}
                        </div>

                        <button
                            onclick="restartQuiz()"
                            class="bg-gradient-to-r from-indigo-600 to-purple-700 text-white text-xl font-bold py-4 px-8 rounded-2xl hover:shadow-lg transform hover:scale-105 transition-all duration-200"
                        >
                            é‡å•Ÿå®‡å®™ ğŸš€
                        </button>
                    </div>
                </div>
            `;
        }

        renderApp();

    </script>
</body>
</html>
