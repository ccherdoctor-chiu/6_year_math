<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…­æ­²æ•¸å­¸ä½œæ›²å®¶æ¸¬é©—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Serif TC', serif;
            background-color: #1a1a1a; /* Dark charcoal background */
            background-image: url('https://www.transparenttextures.com/patterns/dark-denim-3.png');
        }
        #app > div {
            animation: fadeIn 0.8s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .composer-badge {
            animation: score-glow 3s infinite alternate;
        }
        @keyframes score-glow {
            from {
                text-shadow: 0 0 5px #fef08a, 0 0 10px #fef08a;
            }
            to {
                text-shadow: 0 0 10px #fde047, 0 0 15px #fde047;
            }
        }
        .question-text {
            font-size: 1.75rem;
            line-height: 2.5rem;
        }
        .option-text {
            font-size: 1.5rem;
        }
        @media (min-width: 640px) {
            .question-text {
                font-size: 2.25rem;
                line-height: 2.75rem;
            }
            .option-text {
                font-size: 1.75rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="app" class="min-h-screen p-4">
        <!-- The quiz will be rendered here by JavaScript -->
    </div>

    <script>
        // State variables to manage the quiz
        let currentQuestionIndex = 0;
        let answers = {};
        let showResult = false;

        // Composer level quiz questions for 6-year-olds
        const questions = [
            // è¨ˆç®— (3é¡Œ) - ç¯€æ‹ã€éŸ³ç¬¦æ™‚å€¼
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "ä¸€å€‹å…¨éŸ³ç¬¦ğŸµç­‰æ–¼4æ‹ã€‚ä¸€å€‹åŠéŸ³ç¬¦ç­‰æ–¼2æ‹ã€‚ä¸€å€‹å…¨éŸ³ç¬¦å¯ä»¥æ›æˆå¹¾å€‹åŠéŸ³ç¬¦ï¼Ÿ", options: ["1å€‹", "2å€‹", "3å€‹", "4å€‹"], correct: 1, type: "calculation", explanation: "ä¸€å€‹å…¨éŸ³ç¬¦æ˜¯4æ‹ï¼Œä¸€å€‹åŠéŸ³ç¬¦æ˜¯2æ‹ã€‚ 4 Ã· 2 = 2ã€‚æ‰€ä»¥ä¸€å€‹å…¨éŸ³ç¬¦ç­‰æ–¼å…©å€‹åŠéŸ³ç¬¦çš„é•·åº¦ã€‚" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "åœ¨4/4æ‹çš„éŸ³æ¨‚ä¸­ï¼Œä¸€å€‹å°ç¯€æœ‰4æ‹ã€‚å¦‚æœå°ç¯€è£¡å·²ç¶“æœ‰ä¸€å€‹æŒçºŒ3æ‹çš„éŸ³ç¬¦ï¼Œé‚„èƒ½æ”¾é€²ä¸€å€‹å¹¾æ‹çš„éŸ³ç¬¦ï¼Ÿ", options: ["1æ‹", "2æ‹", "3æ‹", "4æ‹"], correct: 0, type: "calculation", explanation: "ä¸€å€‹å°ç¯€ç¸½å…±4æ‹ã€‚ç”¨æ‰3æ‹å¾Œï¼Œé‚„å‰©ä¸‹ 4 - 3 = 1æ‹ã€‚" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "ä¸€é¦–æ­Œæ›²çš„é€Ÿåº¦æ˜¯æ¯åˆ†é˜60æ‹ã€‚é€™é¦–æ­Œæ¼”å¥äº†2åˆ†é˜ï¼Œç¸½å…±æ¼”å¥äº†å¤šå°‘æ‹ï¼Ÿ", options: ["60æ‹", "80æ‹", "100æ‹", "120æ‹"], correct: 3, type: "calculation", explanation: "æ¯åˆ†é˜60æ‹ï¼Œæ¼”å¥2åˆ†é˜ï¼Œå°±æ˜¯ 60 x 2 = 120æ‹ã€‚" },
            
            // å¹¾ä½• (3é¡Œ) - æ¨‚å™¨å½¢ç‹€ã€æ¨‚è­œåœ–å½¢
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "é‹¼ç´ğŸ¹çš„é»‘éµæ˜¯æ€éº¼æ’åˆ—çš„ï¼Ÿ", options: ["å…¨éƒ¨é€£åœ¨ä¸€èµ·", "2å€‹ä¸€çµ„ï¼Œ3å€‹ä¸€çµ„", "3å€‹ä¸€çµ„ï¼Œ4å€‹ä¸€çµ„", "éƒ½ä¸€æ¨£éš”é–‹"], correct: 1, type: "geometry", explanation: "é‹¼ç´çš„é»‘éµæ˜¯æŒ‰ç…§ã€Œå…©å€‹ä¸€çµ„ã€å’Œã€Œä¸‰å€‹ä¸€çµ„ã€çš„è¦å¾‹é‡è¤‡æ’åˆ—çš„ï¼Œé€™æœ‰åŠ©æ–¼éŸ³æ¨‚å®¶å¿«é€Ÿæ‰¾åˆ°éŸ³çš„ä½ç½®ã€‚" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "å“ªç¨®æ¨‚å™¨çš„ä¸»è¦ç™¼è²éƒ¨åˆ†æ˜¯é•·é•·çš„ã€Œç›´ç·šã€ï¼Ÿ", options: ["é¼“ğŸ¥", "å‰ä»–ğŸ¸", "é‹¼ç´ğŸ¹", "å°è™ŸğŸº"], correct: 1, type: "geometry", explanation: "å‰ä»–ã€é‹¼ç´éƒ½æ˜¯é æ‹‰ç·Šçš„ã€Œå¼¦ã€(ç·š)æŒ¯å‹•ä¾†ç™¼è²çš„ã€‚" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "äº”ç·šè­œæœ¬èº«æ˜¯ç”±ä»€éº¼çµ„æˆçš„ï¼Ÿ", options: ["äº”å€‹é»", "äº”æ¢å¹³è¡Œçš„ç›´ç·š", "äº”å€‹åœ“åœˆ", "äº”å€‹ä¸‰è§’å½¢"], correct: 1, type: "geometry", explanation: "äº”ç·šè­œï¼Œé¡§åæ€ç¾©ï¼Œå°±æ˜¯ç”±äº”æ¢äº’ç›¸å¹³è¡Œçš„ç›´ç·šæ‰€æ§‹æˆçš„ï¼ŒéŸ³ç¬¦å°±è¨˜éŒ„åœ¨é€™äº›ç·šå’Œé–“ä¸Šã€‚" },
            
            // æ‡‰ç”¨ (4é¡Œ) - éŸ³æ¨‚é‚è¼¯
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "ä¸€é¦–æ­Œçš„æ­Œè©æœ‰4æ®µï¼Œæ¯æ®µæœ‰5å¥ã€‚é€™é¦–æ­Œç¸½å…±æœ‰å¹¾å¥æ­Œè©ï¼Ÿ", options: ["9å¥", "15å¥", "20å¥", "25å¥"], correct: 2, type: "application", explanation: "é€™æ˜¯ä¸€å€‹ä¹˜æ³•æ‡‰ç”¨é¡Œï¼š4æ®µ x 5å¥/æ®µ = 20å¥ã€‚" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "æ¨‚åœ˜è£¡æœ‰å¼¦æ¨‚ã€ç®¡æ¨‚å’Œæ‰“æ“Šæ¨‚ã€‚å¤§æç´ğŸ»æ‡‰è©²ååœ¨å“ªå€‹å€åŸŸï¼Ÿ", options: ["å¼¦æ¨‚å€", "ç®¡æ¨‚å€", "æ‰“æ“Šæ¨‚å€", "æŒ‡æ®å°"], correct: 0, type: "application", explanation: "å¤§æç´ã€å°æç´ã€ä¸­æç´ç­‰éƒ½æ˜¯é å¼¦æŒ¯å‹•ç™¼è²çš„ï¼Œå±¬æ–¼å¼¦æ¨‚å™¨ã€‚" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "ä½œæ›²å®¶æƒ³å¯«ä¸€é¦–ã€Œå¿«æ¨‚ã€çš„æ­Œï¼Œä»–é€šå¸¸æœƒé¸æ“‡ä»€éº¼æ¨£çš„é€Ÿåº¦ï¼Ÿ", options: ["éå¸¸æ…¢", "æ…¢æ¿", "ä¸­æ¿", "å¿«æ¿"], correct: 3, type: "application", explanation: "é€šå¸¸ï¼Œå¿«æ¿çš„éŸ³æ¨‚ï¼ˆé€Ÿåº¦å¿«ï¼‰æ›´å®¹æ˜“è¡¨ç¾å‡ºå¿«æ¨‚ã€æ´»æ½‘çš„æƒ…ç·’ï¼Œè€Œæ…¢æ¿éŸ³æ¨‚å‰‡è¼ƒç‚ºæŠ’æƒ…æˆ–æ‚²å‚·ã€‚" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "ä¸€å ´éŸ³æ¨‚æœƒå¾æ™šä¸Š7é»é–‹å§‹ï¼Œå…¨é•·90åˆ†é˜ï¼ŒçµæŸæ™‚æ˜¯å¹¾é»ï¼Ÿ", options: ["7é»90åˆ†", "8é»æ•´", "8é»åŠ", "9é»æ•´"], correct: 2, type: "application", explanation: "90åˆ†é˜ç­‰æ–¼1å€‹å°æ™‚åˆ30åˆ†é˜ã€‚æ‰€ä»¥å¾7é»é–‹å§‹ï¼Œç¶“é1å°æ™‚æ˜¯8é»ï¼Œå†åŠ 30åˆ†é˜å°±æ˜¯8é»åŠã€‚" },

            // ä»£æ•¸ (3é¡Œ) - éŸ³éšã€æ¨¡å¼
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "éŸ³éšDo, Re, Mi, Fa, Sol, La, Siæ˜¯ä¸€å€‹é‡è¤‡çš„åºåˆ—ã€‚åœ¨Siä¹‹å¾Œæ˜¯ä»€éº¼éŸ³ï¼Ÿ", options: ["Do", "Re", "Mi", "Fa"], correct: 0, type: "algebra", explanation: "éŸ³éšæ˜¯ä¸€å€‹å¾ªç’°çš„æ¨¡å¼ï¼Œç•¶å”±å®ŒSiä¹‹å¾Œï¼Œå°±æœƒå›åˆ°æ›´é«˜éŸ³çš„Doï¼Œé–‹å§‹æ–°çš„ä¸€è¼ªã€‚" },
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "å¦‚æœä¸€å€‹éŸ³çš„é »ç‡æ˜¯ Fï¼Œé«˜å…«åº¦çš„éŸ³é »ç‡æ˜¯ 2Fã€‚é‚£æ¯” 2F å†é«˜å…«åº¦çš„éŸ³é »ç‡æ˜¯å¤šå°‘ï¼Ÿ", options: ["2F + 8", "3F", "4F", "F x F"], correct: 2, type: "algebra", explanation: "æ¯é«˜ä¸€å€‹å…«åº¦ï¼Œé »ç‡å°±åŠ å€ã€‚æ‰€ä»¥ 2F å†åŠ å€å°±æ˜¯ 2F x 2 = 4Fã€‚" },
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "ä¸€é¦–æ­Œæ›²çš„çµæ§‹æ˜¯ A-B-A-C-Aã€‚å¦‚æœç”¨Xä»£è¡¨Aæ®µï¼ŒYä»£è¡¨Bæ®µï¼ŒZä»£è¡¨Cæ®µï¼Œé€™å€‹çµæ§‹å¯ä»¥å¯«æˆï¼Ÿ", options: ["X-Y-Z", "X-Y-X-Z-X", "A-B-A-C-A", "XYZ-X"], correct: 1, type: "algebra", explanation: "é€™å°±æ˜¯ç”¨ä»£æ•¸ç¬¦è™Ÿä¾†è¡¨ç¤ºéŸ³æ¨‚çš„æ›²å¼çµæ§‹ï¼Œè®“æˆ‘å€‘èƒ½æ›´æ¸…æ™°åœ°åˆ†ææ¨‚æ›²ã€‚" },
            
            // çµ„åˆ (3é¡Œ) - éŸ³æ¨‚å‰µä½œ
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "ä½œæ›²å®¶åªæœ‰Do, Re, Miä¸‰å€‹éŸ³å¯ä»¥ç”¨ï¼Œä»–æƒ³å¯«ä¸€å€‹ç”±2å€‹ä¸åŒéŸ³ç¬¦çµ„æˆçš„æ¨‚å¥ï¼Œæœ‰å¹¾ç¨®çµ„åˆï¼Ÿ", options: ["3ç¨®", "4ç¨®", "5ç¨®", "6ç¨®"], correct: 3, type: "combination", explanation: "å¯èƒ½çš„çµ„åˆæœ‰ï¼šDo-Re, Do-Mi, Re-Do, Re-Mi, Mi-Do, Mi-Reã€‚ç¸½å…±6ç¨®ã€‚" },
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "ä¸€å€‹å’Œå¼¦ç”±3å€‹éŸ³çµ„æˆã€‚å¦‚æœå¾5å€‹ä¸åŒçš„éŸ³ä¸­æŒ‘é¸3å€‹éŸ³ä¾†çµ„æˆå’Œå¼¦ï¼Œé€™å±¬æ–¼æ•¸å­¸çš„å“ªå€‹é ˜åŸŸï¼Ÿ", options: ["åŠ æ³•", "æ¸›æ³•", "å¹¾ä½•", "çµ„åˆå­¸"], correct: 3, type: "combination", explanation: "å¾ä¸€å€‹ç¾¤é«”ä¸­æŒ‘é¸éƒ¨åˆ†æˆå“¡é€²è¡Œçµ„åˆï¼Œé€™æ˜¯çµ„åˆå­¸ï¼ˆCombinatoricsï¼‰ç ”ç©¶çš„æ ¸å¿ƒå•é¡Œã€‚" },
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "æœ‰4ä½æ¼”å¥å®¶(A,B,C,D)ï¼Œè¦å®‰æ’ä»–å€‘ä¸Šå°çš„é †åºï¼Œæœ‰å¹¾ç¨®ä¸åŒçš„æ’æ³•ï¼Ÿ", options: ["4ç¨®", "12ç¨®", "16ç¨®", "24ç¨®"], correct: 3, type: "combination", explanation: "é€™æ˜¯éšä¹˜çš„è¨ˆç®—ï¼ç¬¬ä¸€å€‹ä¸Šå°çš„æœ‰4ç¨®é¸æ“‡ï¼Œç¬¬äºŒå€‹å‰©3ç¨®ï¼Œç¬¬ä¸‰å€‹å‰©2ç¨®ï¼Œæœ€å¾Œ1ç¨®ã€‚ç¸½å…± 4 x 3 x 2 x 1 = 24ç¨®ã€‚" },
            
            // æ•¸æ„Ÿ (3é¡Œ) - éŸ³é«˜ã€éŸ³é‡
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "ä¸€å€‹éŸ³è½èµ·ä¾†å¾ˆã€Œé«˜ã€ï¼Œä»£è¡¨å®ƒçš„é »ç‡æ˜¯é«˜é‚„æ˜¯ä½ï¼Ÿ", options: ["é«˜", "ä½", "ä¸ä¸€å®š", "è·Ÿé »ç‡ç„¡é—œ"], correct: 0, type: "number_sense", explanation: "éŸ³é«˜æ˜¯ç”±è²æ³¢çš„é »ç‡æ±ºå®šçš„ã€‚é »ç‡è¶Šé«˜ï¼Œæˆ‘å€‘è½åˆ°çš„éŸ³å°±è¶Šé«˜ã€‚" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "æ¨‚è­œä¸Šçš„ã€Œpã€ä»£è¡¨å¼±(piano)ï¼Œã€Œfã€ä»£è¡¨å¼·(forte)ã€‚å“ªå€‹éŸ³çš„éŸ³é‡æ¯”è¼ƒå¤§ï¼Ÿ", options: ["p", "f", "ä¸€æ¨£å¤§", "ç„¡æ³•æ¯”è¼ƒ"], correct: 1, type: "number_sense", explanation: "åœ¨éŸ³æ¨‚è¡“èªä¸­ï¼Œf (forte) ä»£è¡¨å¼·ï¼Œp (piano) ä»£è¡¨å¼±ã€‚æ‰€ä»¥æ¨™ç¤º f çš„éŸ³ç¬¦è¦æ¼”å¥å¾—æ¯”è¼ƒå¤§è²ã€‚" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "å“ªç¨®æ¨‚å™¨å¯èƒ½ç™¼å‡ºæœ€ä½çš„éŸ³ï¼Ÿ", options: ["çŸ­ç¬›", "å°æç´", "ä½éŸ³å¤§æç´", "ä¸‰è§’éµ"], correct: 2, type: "number_sense", explanation: "é€šå¸¸ï¼Œæ¨‚å™¨çš„é«”ç©è¶Šå¤§ã€å¼¦æˆ–ç©ºæ°£æŸ±è¶Šé•·ï¼Œç™¼å‡ºçš„éŸ³å°±è¶Šä½ã€‚ä½éŸ³å¤§æç´æ˜¯å¼¦æ¨‚å™¨ä¸­é«”ç©æœ€å¤§ã€éŸ³åŸŸæœ€ä½çš„ã€‚" }
        ];

        const appContainer = document.getElementById('app');

        function handleAnswer(selectedIndex) {
            answers[currentQuestionIndex] = selectedIndex;
            renderApp(); 

            if (currentQuestionIndex < questions.length - 1) {
                setTimeout(() => {
                    currentQuestionIndex++;
                    renderApp();
                }, 3000); 
            } else {
                setTimeout(() => {
                    showResult = true;
                    renderApp();
                }, 3000);
            }
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            answers = {};
            showResult = false;
            renderApp();
        }

        function calculateResults() {
            const results = {
                calculation: { correct: 0, total: 0 },
                geometry: { correct: 0, total: 0 },
                application: { correct: 0, total: 0 },
                algebra: { correct: 0, total: 0 },
                combination: { correct: 0, total: 0 },
                number_sense: { correct: 0, total: 0 }
            };

            questions.forEach((question, index) => {
                const type = question.type;
                results[type].total++;
                if (answers[index] === question.correct) {
                    results[type].correct++;
                }
            });
            return results;
        }

        function renderApp() {
            document.body.className = 'bg-[#1a1a1a]';

            if (showResult) {
                renderResultScreen();
            } else {
                renderQuestionScreen();
            }
        }

        function renderQuestionScreen() {
            const question = questions[currentQuestionIndex];
            const selectedAnswer = answers[currentQuestionIndex];
            const isAnswered = selectedAnswer !== undefined;

            const optionsHtml = question.options.map((option, index) => {
                let buttonClass = 'bg-stone-700 bg-opacity-50 border-amber-400 text-white hover:bg-amber-900 hover:border-amber-300 cursor-pointer';
                let icon = '';

                if (isAnswered) {
                    if (index === question.correct) {
                        buttonClass = 'bg-green-600 border-green-500 text-white';
                        icon = '<span class="inline-block ml-2">ğŸ¼</span>';
                    } else if (index === selectedAnswer) {
                        buttonClass = 'bg-red-800 border-red-600 text-white';
                        icon = '<span class="inline-block ml-2">âŒ</span>';
                    } else {
                        buttonClass = 'bg-gray-800 border-gray-700 text-gray-500';
                    }
                }

                return `
                    <button
                        onclick="${isAnswered ? '' : `handleAnswer(${index})`}"
                        ${isAnswered ? 'disabled' : ''}
                        class="p-4 sm:p-6 rounded-lg option-text font-bold border-4 transition-all duration-300 transform hover:shadow-2xl hover:scale-105 ${buttonClass}"
                    >
                        ${option} ${icon}
                    </button>
                `;
            }).join('');

            appContainer.innerHTML = `
                <div class="max-w-3xl mx-auto">
                    <div class="text-center mb-6">
                        <span class="inline-block bg-clip-text text-transparent bg-gradient-to-r from-amber-300 via-yellow-400 to-amber-200 px-6 py-3 font-bold text-4xl composer-badge">
                            ğŸ¼ ä½œæ›²å®¶æ¨‚ç«  ğŸ¼
                        </span>
                    </div>

                    <div class="bg-black bg-opacity-20 rounded-full p-2 mb-6">
                        <div 
                            class="bg-gradient-to-r from-amber-400 to-yellow-500 rounded-full h-4 transition-all duration-500"
                            style="width: ${((currentQuestionIndex + 1) / questions.length) * 100}%"
                        ></div>
                    </div>

                    <div class="text-center text-amber-200 text-xl mb-4">
                        æ¨‚ç«  ${currentQuestionIndex + 1} / ${questions.length}
                    </div>

                    <div class="bg-stone-800 bg-opacity-80 backdrop-blur-sm rounded-lg shadow-2xl p-6 sm:p-8 border-4 border-amber-500">
                        <div class="text-center mb-6">
                            <div class="text-3xl font-bold text-amber-300 mb-4">
                                ${question.category}
                            </div>
                            <div class="question-text font-bold text-white mb-6 min-h-[8rem] flex flex-col items-center justify-center">
                                ${question.question}
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${optionsHtml}
                        </div>

                        ${isAnswered ? `
                            <div class="mt-8">
                                <div class="text-center text-3xl sm:text-4xl font-bold mb-2 text-white">
                                    ${selectedAnswer === question.correct ? "å’Œè«§çš„æ¨‚éŸ³ï¼" : "ä¸€å€‹ä¸å’Œè«§éŸ³..."}
                                </div>
                                ${question.explanation ? `
                                    <div class="bg-stone-900 bg-opacity-80 rounded-lg p-4 mt-4 border-2 border-amber-700">
                                        <div class="text-lg font-bold text-amber-300 mb-1">ğŸ’¡ ä½œæ›²å®¶è§£æï¼š</div>
                                        <div class="text-base text-gray-200">${question.explanation}</div>
                                    </div>
                                ` : ''}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }
        
        function renderResultScreen() {
            const results = calculateResults();
            const totalCorrect = Object.values(results).reduce((sum, r) => sum + r.correct, 0);
            const totalQuestions = questions.length;
            const scorePercentage = totalCorrect / totalQuestions;
            
            let resultEmoji = "ğŸ¤”";
            let resultMessage = "ä½ çš„æ¨‚æ›²å……æ»¿äº†æ•¸å­¸çš„æ™ºæ…§èˆ‡ç¾æ„Ÿï¼";
            let starCount = 4;

            if (scorePercentage >= 0.8) {
                resultEmoji = "ğŸ¶";
                resultMessage = "ä¸€é¦–å®Œç¾çš„äº¤éŸ¿æ¨‚ï¼ä½ æ˜¯éŸ³æ¨‚æ•¸å­¸çš„å¤§å¸«ï¼";
                starCount = 5;
            } else if (scorePercentage >= 0.6) {
                resultEmoji = "ğŸµ";
                resultMessage = "è¯éº—çš„æ¨‚ç« ï¼ä½ å·²è­œå‡ºæ•¸å­¸èˆ‡è—è¡“çš„çµåˆï¼";
                starCount = 4;
            } else if (scorePercentage >= 0.4) {
                resultEmoji = "ğŸ¼";
                resultMessage = "å’Œè«§çš„æ—‹å¾‹ï¼ä½ å·²æŒæ¡äº†éŸ³æ¨‚ä¸­çš„æ•¸å­¸è¦å¾‹ï¼";
                starCount = 3;
            }

            const categoryResultsHtml = Object.keys(results).map(key => {
                const categoryMap = {
                    calculation: { name: "ğŸ§® è¨ˆç®—", style: "bg-red-900 bg-opacity-50 border-red-700 text-red-200" },
                    geometry: { name: "ğŸ”º å¹¾ä½•", style: "bg-blue-900 bg-opacity-50 border-blue-700 text-blue-200" },
                    application: { name: "ğŸ›’ æ‡‰ç”¨", style: "bg-green-900 bg-opacity-50 border-green-700 text-green-200" },
                    algebra: { name: "ğŸ¨ ä»£æ•¸", style: "bg-purple-900 bg-opacity-50 border-purple-700 text-purple-200" },
                    combination: { name: "ğŸ§© çµ„åˆ", style: "bg-yellow-900 bg-opacity-50 border-yellow-700 text-yellow-200" },
                    number_sense: { name: "ğŸ”¢ æ•¸æ„Ÿ", style: "bg-pink-900 bg-opacity-50 border-pink-700 text-pink-200" },
                };
                const info = categoryMap[key];
                return `
                    <div class="${info.style} p-4 rounded-xl border-2">
                        <div class="text-lg font-bold">${info.name}</div>
                        <div class="text-xl font-bold">${results[key].correct}/${results[key].total}</div>
                    </div>
                `;
            }).join('');

            const starsHtml = Array(starCount).fill('ğŸ¶').join(' ');

            appContainer.innerHTML = `
                <div class="max-w-2xl mx-auto">
                    <div class="bg-stone-800 bg-opacity-80 backdrop-blur-sm rounded-lg shadow-2xl p-8 text-center border-4 border-amber-400">
                        <div class="text-7xl mb-4">${resultEmoji}</div>
                        
                        <h2 class="text-3xl font-bold text-white mb-2">ä½œæ›²å®¶è©¦ç…‰å®Œæˆï¼</h2>
                        <div class="text-5xl mb-4">${starsHtml}</div>
                        
                        <div class="text-2xl font-bold text-amber-300 mb-6">
                            æœ€çµ‚å¾—åˆ†ï¼š${totalCorrect} / ${totalQuestions}
                        </div>

                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6">
                           ${categoryResultsHtml}
                        </div>

                        <div class="text-2xl mb-6 font-bold text-gray-300">
                            ${resultMessage}
                        </div>

                        <button
                            onclick="restartQuiz()"
                            class="bg-gradient-to-r from-amber-500 to-yellow-600 text-black text-xl font-bold py-4 px-8 rounded-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-200"
                        >
                            å†ä½œä¸€é¦– ğŸ¼
                        </button>
                    </div>
                </div>
            `;
        }

        renderApp();

    </script>
</body>
</html>
