<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…­æ­²æ•¸å­¸æ¢éšªå®¶æ¸¬é©—</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #000011; /* Deep space black */
            background-image: url('https://www.transparenttextures.com/patterns/stardust.png');
        }
        #app > div {
            animation: fadeIn 1s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.98); }
            to { opacity: 1; transform: scale(1); }
        }
        .voyager-badge {
            animation: nebula-glow 4s infinite ease-in-out;
        }
        @keyframes nebula-glow {
            0%, 100% {
                transform: scale(1);
                text-shadow: 0 0 10px #fff, 0 0 20px #9333ea, 0 0 30px #9333ea, 0 0 40px #3b82f6;
            }
            50% {
                transform: scale(1.05);
                text-shadow: 0 0 20px #fff, 0 0 40px #a855f7, 0 0 60px #60a5fa, 0 0 80px #60a5fa;
            }
        }
        .question-text {
            font-size: 1.75rem;
            line-height: 2.5rem;
        }
        .option-text {
            font-size: 1.5rem;
        }
        @media (min-width: 640px) {
            .question-text {
                font-size: 2.25rem;
                line-height: 2.75rem;
            }
            .option-text {
                font-size: 1.75rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="app" class="min-h-screen p-4">
        <!-- The quiz will be rendered here by JavaScript -->
    </div>

    <script>
        // State variables to manage the quiz
        let currentQuestionIndex = 0;
        let answers = {};
        let showResult = false;

        // Voyager level quiz questions for 6-year-olds
        const questions = [
            // è¨ˆç®— (3é¡Œ) - å·¨å¤§æ•¸å­—ã€å…‰å¹´
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "å…‰é€Ÿéå¸¸å¿«ï¼Œæ¯ç§’ç´„30è¬å…¬é‡Œã€‚å¤ªç©ºèˆ¹ğŸš€çš„é€Ÿåº¦é é æ…¢æ–¼å…‰é€Ÿã€‚å“ªå€‹é€Ÿåº¦æ›´å¿«ï¼Ÿ", options: ["å…‰é€Ÿ", "å¤ªç©ºèˆ¹", "ä¸€æ¨£å¿«", "ç„¡æ³•æ¯”è¼ƒ"], correct: 0, type: "calculation", explanation: "å…‰é€Ÿæ˜¯ç›®å‰å·²çŸ¥å®‡å®™ä¸­æœ€å¿«çš„é€Ÿåº¦ï¼Œä»»ä½•æœ‰è³ªé‡çš„ç‰©é«”éƒ½ç„¡æ³•è¶…è¶Šå®ƒã€‚" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "åœ°çƒåˆ°æœˆçƒè·é›¢ç´„38è¬å…¬é‡Œï¼Œåœ°çƒåˆ°å¤ªé™½è·é›¢ç´„1å„„5åƒè¬å…¬é‡Œã€‚å“ªå€‹è·é›¢æ¯”è¼ƒé ï¼Ÿ", options: ["åˆ°æœˆçƒ", "åˆ°å¤ªé™½", "ä¸€æ¨£é ", "é¡Œç›®éŒ¯äº†"], correct: 1, type: "calculation", explanation: "1å„„5åƒè¬é é å¤§æ–¼38è¬ã€‚å¤ªé™½ç³»çš„å°ºåº¦é è¶…æˆ‘å€‘çš„æƒ³åƒã€‚" },
            { category: "ğŸ§® è¨ˆç®—", color: "bg-red-100 border-red-300", question: "å¦‚æœä¸€å€‹å¤–æ˜Ÿæ–‡æ˜åœ¨10å…‰å¹´å¤–ï¼Œä»£è¡¨æˆ‘å€‘çœ‹åˆ°çš„æ˜¯ä»–å€‘å¹¾å¹´å‰çš„æ¨£å­ï¼Ÿ", options: ["ç¾åœ¨çš„æ¨£å­", "10å¹´å‰", "20å¹´å‰", "10å¹´å¾Œ"], correct: 1, type: "calculation", explanation: "å…‰éœ€è¦æ™‚é–“ä¾†å‚³æ’­ã€‚10å…‰å¹´å¤–çš„ä¿¡è™Ÿï¼Œéœ€è¦èŠ±10å¹´æ‰èƒ½åˆ°é”æˆ‘å€‘é€™è£¡ï¼Œæ‰€ä»¥æˆ‘å€‘çœ‹åˆ°çš„æ˜¯ä»–å€‘10å¹´å‰çš„éå»ã€‚" },
            
            // å¹¾ä½• (3é¡Œ) - è»Œé“ã€æ˜Ÿçƒå½¢ç‹€
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "è¡Œæ˜Ÿåœç¹å¤ªé™½å…¬è½‰çš„è»Œé“ï¼Œæ¯”è¼ƒæ¥è¿‘ä»€éº¼å½¢ç‹€ï¼Ÿ", options: ["æ­£åœ“å½¢", "æ­£æ–¹å½¢", "æ©¢åœ“å½¢", "ä¸‰è§’å½¢"], correct: 2, type: "geometry", explanation: "æ ¹æ“šå…‹åœå‹’å®šå¾‹ï¼Œæ‰€æœ‰è¡Œæ˜Ÿçš„è»Œé“éƒ½æ˜¯æ©¢åœ“å½¢ï¼Œå¤ªé™½å‰‡ä½æ–¼å…¶ä¸­ä¸€å€‹ç„¦é»ä¸Šã€‚" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "ç‚ºä»€éº¼å¤§éƒ¨åˆ†çš„è¡Œæ˜Ÿå’Œæ†æ˜Ÿéƒ½æ˜¯çƒå½¢çš„ï¼Ÿ", options: ["å› ç‚ºå¥½çœ‹", "ç‚ºäº†è½‰å¾—å¿«", "å› ç‚ºé‡åŠ›å¾å››é¢å…«æ–¹æ‹‰å‘ä¸­å¿ƒ", "å·§åˆ"], correct: 2, type: "geometry", explanation: "é‡åŠ›æœƒå°‡ç‰©è³ªå¾æ‰€æœ‰æ–¹å‘å‡å‹»åœ°æ‹‰å‘ä¸­å¿ƒé»ï¼Œæœ€çµ‚å½¢æˆèƒ½é‡æœ€ç©©å®šçš„çƒå½¢ã€‚" },
            { category: "ğŸ”º å¹¾ä½•", color: "bg-blue-100 border-blue-300", question: "å¾åœ°çƒä¸Šçœ‹ï¼Œç‚ºä»€éº¼æœˆäº®ğŸŒ™æœ‰æ™‚å€™æ˜¯åœ“çš„ï¼Œæœ‰æ™‚å€™æ˜¯å½çš„ï¼Ÿ", options: ["æœˆäº®æœƒè®Šå½¢", "è¢«é›²æ“‹ä½äº†", "å¤ªé™½ç…§å°„æœˆäº®è§’åº¦ä¸åŒ", "åœ°çƒçš„å½±å­"], correct: 2, type: "geometry", explanation: "æœˆç›¸çš„è®ŠåŒ–ï¼Œæ˜¯å› ç‚ºæœˆçƒã€åœ°çƒã€å¤ªé™½ä¸‰è€…çš„ç›¸å°ä½ç½®æ”¹è®Šï¼Œå°è‡´æˆ‘å€‘çœ‹åˆ°æœˆçƒè¢«å¤ªé™½ç…§äº®çš„éƒ¨åˆ†ä¸ä¸€æ¨£ã€‚" },
            
            // æ‡‰ç”¨ (4é¡Œ) - å¤ªç©ºé‚è¼¯
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "å¤ªç©ºäººå»ç«æ˜Ÿæ¢éšªï¼Œéœ€è¦å¸¶æ°§æ°£ã€æ°´å’Œé£Ÿç‰©ã€‚å“ªæ¨£æ±è¥¿åœ¨ç«æ˜Ÿä¸Šã€Œå®Œå…¨æ²’æœ‰ã€ï¼Œå¿…é ˆå¾åœ°çƒå¸¶å»ï¼Ÿ", options: ["æ°´(æœ‰å†°)", "é£Ÿç‰©", "æ°§æ°£", "é™½å…‰"], correct: 2, type: "application", explanation: "ç«æ˜Ÿå¤§æ°£éå¸¸ç¨€è–„ä¸”ä¸»è¦æ˜¯äºŒæ°§åŒ–ç¢³ï¼Œæ²’æœ‰å¯ä¾›å‘¼å¸çš„æ°§æ°£ã€‚é›–ç„¶ç«æ˜Ÿæœ‰å†°ï¼ˆæ°´ï¼‰ï¼Œä½†é£Ÿç‰©ä¹Ÿå¿…é ˆè‡ªå·±å¸¶ã€‚" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "ä¸€è‰˜å¤ªç©ºèˆ¹è¦å¾åœ°çƒé£›åˆ°æœ¨æ˜Ÿï¼Œä¸­é€”ç¶“éç«æ˜Ÿã€‚å®ƒçš„é£›è¡Œé †åºæ˜¯ä»€éº¼ï¼Ÿ", options: ["åœ°çƒâ†’æœ¨æ˜Ÿâ†’ç«æ˜Ÿ", "åœ°çƒâ†’ç«æ˜Ÿâ†’æœ¨æ˜Ÿ", "ç«æ˜Ÿâ†’åœ°çƒâ†’æœ¨æ˜Ÿ", "æœ¨æ˜Ÿâ†’ç«æ˜Ÿâ†’åœ°çƒ"], correct: 1, type: "application", explanation: "å¤ªé™½ç³»è¡Œæ˜Ÿçš„é †åºæ˜¯ï¼šæ°´ã€é‡‘ã€åœ°ã€ç«ã€æœ¨...ã€‚æ‰€ä»¥å¾åœ°çƒå‡ºç™¼ï¼Œæœƒå…ˆç¶“éç«æ˜Ÿï¼Œæ‰èƒ½åˆ°é”æœ¨æ˜Ÿã€‚" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "å¦‚æœä½ çš„é›™èƒèƒå…„å¼Ÿæ­ä¹˜æ¥è¿‘å…‰é€Ÿçš„é£›èˆ¹æ—…è¡Œä¸€å¹´å†å›ä¾†ï¼Œæ ¹æ“šæ„›å› æ–¯å¦çš„ç†è«–ï¼Œèª°æœƒæ¯”è¼ƒè€ï¼Ÿ", options: ["ä½ ", "ä½ çš„å…„å¼Ÿ", "ä¸€æ¨£è€", "éƒ½æœƒè®Šå¹´è¼•"], correct: 0, type: "application", explanation: "æ ¹æ“šç‹¹ç¾©ç›¸å°è«–çš„æ™‚é–“è†¨è„¹æ•ˆæ‡‰ï¼Œé€Ÿåº¦è¶Šå¿«ï¼Œæ™‚é–“æµé€å¾—è¶Šæ…¢ã€‚æ‰€ä»¥åœ¨åœ°çƒä¸Šçš„ä½ æœƒæ¯”é€²è¡Œæ˜Ÿéš›æ—…è¡Œçš„å…„å¼Ÿè€å¾—æ›´å¤šã€‚" },
            { category: "ğŸ›’ æ‡‰ç”¨", color: "bg-green-100 border-green-300", question: "æˆ‘å€‘æ™šä¸Šçœ‹åˆ°çš„æ˜Ÿæ˜Ÿï¼Œæœ‰äº›å¯èƒ½åœ¨å¹¾åƒå¹´å‰å°±å·²ç¶“çˆ†ç‚¸æ¶ˆå¤±äº†ã€‚é€™å€‹èªªæ³•æ˜¯å°çš„å—ï¼Ÿ", options: ["å°çš„ï¼Œå› ç‚ºå…‰éœ€è¦æ™‚é–“å‚³æ’­", "ä¸å°ï¼Œæ˜Ÿæ˜Ÿä¸æœƒæ¶ˆå¤±", "ä¸å°ï¼Œæˆ‘å€‘çœ‹åˆ°çš„æ˜¯å³æ™‚çš„", "å°çš„ï¼Œä½†åªè¦å¹¾ç§’é˜"], correct: 0, type: "application", explanation: "å®Œå…¨æ­£ç¢ºã€‚è¨±å¤šæ˜Ÿæ˜Ÿè·é›¢æˆ‘å€‘éå¸¸é™é ï¼Œå®ƒå€‘çš„å…‰éœ€è¦æˆåƒä¸Šè¬å¹´æ‰èƒ½åˆ°é”åœ°çƒã€‚æˆ‘å€‘çœ‹åˆ°çš„æ˜Ÿç©ºï¼Œå…¶å¯¦æ˜¯å®‡å®™çš„ã€Œéå»å¼ã€ã€‚" },

            // ä»£æ•¸ (3é¡Œ) - å®‡å®™å®šå¾‹
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "è¬æœ‰å¼•åŠ›çš„å¤§å°ï¼Œè·Ÿå…©å€‹ç‰©é«”çš„ã€Œè·é›¢ã€æœ‰ä»€éº¼é—œä¿‚ï¼Ÿ", options: ["è·é›¢è¶Šé ï¼Œå¼•åŠ›è¶Šå¤§", "è·é›¢è¶Šé ï¼Œå¼•åŠ›è¶Šå°", "æ²’æœ‰é—œä¿‚", "è·é›¢è¶Šè¿‘ï¼Œå¼•åŠ›è¶Šå°"], correct: 1, type: "algebra", explanation: "è¬æœ‰å¼•åŠ›çš„å¤§å°èˆ‡è·é›¢çš„å¹³æ–¹æˆåæ¯”ã€‚ç°¡å–®ä¾†èªªï¼Œå…©å€‹ç‰©é«”é›¢å¾—è¶Šé ï¼Œå®ƒå€‘ä¹‹é–“çš„å¼•åŠ›å°±è¶Šå¼±ã€‚" },
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "å®‡å®™æ­£åœ¨è†¨è„¹ï¼Œä»£è¡¨æ˜Ÿç³»ä¹‹é–“çš„è·é›¢æ­£åœ¨æ€éº¼æ¨£ï¼Ÿ", options: ["è®Šè¿‘", "è®Šé ", "ä¸è®Š", "å¿½é å¿½è¿‘"], correct: 1, type: "algebra", explanation: "å®‡å®™è†¨è„¹å°±åƒä¸€å€‹æ­£åœ¨å¹å¤§çš„æ°£çƒï¼Œæ°£çƒè¡¨é¢ä¸Šä»»æ„å…©é»çš„è·é›¢éƒ½åœ¨è®Šé ã€‚é€™å°±æ˜¯å“ˆä¼¯å®šå¾‹çš„è§€æ¸¬çµæœã€‚" },
            { category: "ğŸ¨ ä»£æ•¸", color: "bg-purple-100 border-purple-300", question: "æ„›å› æ–¯å¦æœ€è‘—åçš„å…¬å¼ E=mcÂ² å‘Šè¨´æˆ‘å€‘ä»€éº¼ï¼Ÿ", options: ["èƒ½é‡å®ˆæ†", "è³ªé‡å’Œèƒ½é‡å¯ä»¥äº’ç›¸è½‰æ›", "å…‰é€Ÿæ˜¯æ¥µé™", "æ™‚é–“æ˜¯ç›¸å°çš„"], correct: 1, type: "algebra", explanation: "é€™å€‹å…¬å¼æ­ç¤ºäº†å®‡å®™æœ€æ·±åˆ»çš„å¥§ç§˜ä¹‹ä¸€ï¼šè³ªé‡(m)å’Œèƒ½é‡(E)æ˜¯åŒä¸€äº‹ç‰©çš„ä¸åŒè¡¨ç¾å½¢å¼ï¼Œå¯ä»¥äº’ç›¸è½‰æ›ï¼Œå…¶è½‰æ›çš„æ¯”ä¾‹å°±æ˜¯å…‰é€Ÿ(c)çš„å¹³æ–¹ã€‚" },
            
            // çµ„åˆ (3é¡Œ) - å®‡å®™å¯èƒ½æ€§
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "ä¸€å€‹æ¢éšªéšŠæœ‰4ä½å¤ªç©ºäººï¼Œæ¯æ¬¡ä»»å‹™éœ€è¦2äººå‡ºè‰™ã€‚ç¸½å…±æœ‰å¹¾ç¨®ä¸åŒçš„å…©äººçµ„åˆï¼Ÿ", options: ["4ç¨®", "6ç¨®", "8ç¨®", "12ç¨®"], correct: 1, type: "combination", explanation: "é€™æ˜¯ä¸€å€‹çµ„åˆå•é¡Œï¼Œä¸è€ƒæ…®é †åºã€‚ç­”æ¡ˆæ˜¯ (4x3)/(2x1) = 6ç¨®ã€‚" },
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "å¤©æ–‡å­¸å®¶ç”¨3ç¨®é¡è‰²(ç´…ã€ç¶ ã€è—)ä¾†åˆæˆå½©è‰²æ˜Ÿç©ºç…§ç‰‡ã€‚å¦‚æœæ¯ç¨®é¡è‰²éƒ½æœ‰ã€Œé–‹ã€æˆ–ã€Œé—œã€å…©ç¨®é¸æ“‡ï¼Œç¸½å…±å¯ä»¥çµ„åˆå‡ºå¹¾ç¨®é¡è‰²(åŒ…å«é»‘è‰²)ï¼Ÿ", options: ["3ç¨®", "6ç¨®", "8ç¨®", "9ç¨®"], correct: 2, type: "combination", explanation: "æ¯ç¨®é¡è‰²éƒ½æœ‰2ç¨®å¯èƒ½ï¼Œä¸‰ç¨®é¡è‰²å°±æ˜¯ 2 x 2 x 2 = 8ç¨®çµ„åˆã€‚" },
            { category: "ğŸ§© çµ„åˆ", color: "bg-yellow-100 border-yellow-300", question: "å®‡å®™ä¸­æœ‰æ•¸åƒå„„å€‹æ˜Ÿç³»ï¼Œæ¯å€‹æ˜Ÿç³»æœ‰æ•¸åƒå„„é¡†æ†æ˜Ÿã€‚ä½ è¦ºå¾—åªæœ‰åœ°çƒæœ‰ç”Ÿå‘½çš„å¯èƒ½æ€§é«˜å—ï¼Ÿ", options: ["éå¸¸é«˜", "éå¸¸ä½", "ä¸€å®šåªæœ‰åœ°çƒæœ‰", "é€™æ˜¯ç§‘å­¸å•é¡Œï¼Œä¸æ˜¯æ•¸å­¸"], correct: 1, type: "combination", explanation: "å¾æ©Ÿç‡å’Œçµ±è¨ˆçš„è§’åº¦ä¾†çœ‹ï¼Œåœ¨å¦‚æ­¤å·¨å¤§çš„æ¨£æœ¬ç©ºé–“ä¸­ï¼Œåªæœ‰ä¸€å€‹æ¨£æœ¬å…·å‚™æŸç¨®ç‰¹æ€§ï¼ˆç”Ÿå‘½ï¼‰çš„å¯èƒ½æ€§ï¼Œæ˜¯æ¥µä½çš„ã€‚é€™å°±æ˜¯è²»ç±³æ‚–è«–æ‰€æ¢è¨çš„æ ¸å¿ƒã€‚" },
            
            // æ•¸æ„Ÿ (3é¡Œ) - å®‡å®™å°ºåº¦
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "ã€Œå¤©æ–‡æ•¸å­—ã€é€™å€‹è©é€šå¸¸ç”¨ä¾†å½¢å®¹ä»€éº¼ï¼Ÿ", options: ["å¾ˆå°çš„æ•¸å­—", "å¾ˆç²¾ç¢ºçš„æ•¸å­—", "éå¸¸éå¸¸å·¨å¤§çš„æ•¸å­—", "å¾ˆé›£ç®—çš„æ•¸å­—"], correct: 2, type: "number_sense", explanation: "å› ç‚ºå®‡å®™çš„å°ºåº¦éå¸¸å·¨å¤§ï¼Œå¤©æ–‡å­¸ä¸­ä½¿ç”¨çš„æ•¸å­—ï¼ˆå¦‚è·é›¢ã€æ˜Ÿçƒæ•¸é‡ï¼‰ä¹Ÿæ¥µå…¶é¾å¤§ï¼Œå› æ­¤ã€Œå¤©æ–‡æ•¸å­—ã€å°±æˆäº†å·¨å¤§æ•¸é‡çš„ä»£åè©ã€‚" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "æˆ‘å€‘æ‰€åœ¨çš„æ˜Ÿç³»å«åšä»€éº¼ï¼Ÿ", options: ["å¤ªé™½ç³»", "ä»™å¥³åº§æ˜Ÿç³»", "éŠ€æ²³ç³»", "M87æ˜Ÿç³»"], correct: 2, type: "number_sense", explanation: "å¤ªé™½ç³»åªæ˜¯éŠ€æ²³ç³»ä¸­éå¸¸å¾®å°çš„ä¸€éƒ¨åˆ†ã€‚æˆ‘å€‘çš„å®¶ï¼Œåœ¨å®‡å®™ä¸­çš„åœ°å€æ˜¯ï¼šåœ°çƒï¼Œå¤ªé™½ç³»ï¼ŒéŠ€æ²³ç³»ã€‚" },
            { category: "ğŸ”¢ æ•¸æ„Ÿ", color: "bg-pink-100 border-pink-300", question: "ä½ è¦ºå¾—äººé¡çš„æ•¸å­¸ï¼Œèƒ½å®Œå…¨è§£é‡‹æ•´å€‹å®‡å®™å—ï¼Ÿ", options: ["èƒ½", "ä¸èƒ½", "å¿«è¦å¯ä»¥äº†", "é€™æ˜¯ä¸€å€‹é–‹æ”¾æ€§å•é¡Œ"], correct: 3, type: "number_sense", explanation: "é€™æ˜¯ä¸€å€‹æ·±åˆ»çš„å“²å­¸èˆ‡ç§‘å­¸å•é¡Œã€‚é›–ç„¶æ•¸å­¸æ˜¯æˆ‘å€‘ç†è§£å®‡å®™æœ€å¼·å¤§çš„å·¥å…·ï¼Œä½†å®‡å®™æ˜¯å¦é‚„æœ‰æ•¸å­¸ç„¡æ³•è§¸åŠçš„å¥§ç§˜ï¼Ÿæ²’æœ‰äººçŸ¥é“ç¢ºåˆ‡çš„ç­”æ¡ˆã€‚" }
        ];

        const appContainer = document.getElementById('app');

        function handleAnswer(selectedIndex) {
            answers[currentQuestionIndex] = selectedIndex;
            renderApp(); 

            if (currentQuestionIndex < questions.length - 1) {
                setTimeout(() => {
                    currentQuestionIndex++;
                    renderApp();
                }, 3500); 
            } else {
                setTimeout(() => {
                    showResult = true;
                    renderApp();
                }, 3500);
            }
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            answers = {};
            showResult = false;
            renderApp();
        }

        function calculateResults() {
            const results = {
                calculation: { correct: 0, total: 0 },
                geometry: { correct: 0, total: 0 },
                application: { correct: 0, total: 0 },
                algebra: { correct: 0, total: 0 },
                combination: { correct: 0, total: 0 },
                number_sense: { correct: 0, total: 0 }
            };

            questions.forEach((question, index) => {
                const type = question.type;
                results[type].total++;
                if (answers[index] === question.correct) {
                    results[type].correct++;
                }
            });
            return results;
        }

        function renderApp() {
            document.body.className = 'bg-[#000011]';

            if (showResult) {
                renderResultScreen();
            } else {
                renderQuestionScreen();
            }
        }

        function renderQuestionScreen() {
            const question = questions[currentQuestionIndex];
            const selectedAnswer = answers[currentQuestionIndex];
            const isAnswered = selectedAnswer !== undefined;

            const optionsHtml = question.options.map((option, index) => {
                let buttonClass = 'bg-slate-800 bg-opacity-50 border-blue-400 text-white hover:bg-blue-900 hover:border-blue-300 cursor-pointer';
                let icon = '';

                if (isAnswered) {
                    if (index === question.correct) {
                        buttonClass = 'bg-green-600 border-green-500 text-white';
                        icon = '<span class="inline-block ml-2">ğŸ›°ï¸</span>';
                    } else if (index === selectedAnswer) {
                        buttonClass = 'bg-red-800 border-red-600 text-white';
                        icon = '<span class="inline-block ml-2">â˜„ï¸</span>';
                    } else {
                        buttonClass = 'bg-gray-900 border-gray-800 text-gray-500';
                    }
                }

                return `
                    <button
                        onclick="${isAnswered ? '' : `handleAnswer(${index})`}"
                        ${isAnswered ? 'disabled' : ''}
                        class="p-4 sm:p-6 rounded-lg option-text font-bold border-4 transition-all duration-300 transform hover:shadow-2xl hover:scale-105 ${buttonClass}"
                    >
                        ${option} ${icon}
                    </button>
                `;
            }).join('');

            appContainer.innerHTML = `
                <div class="max-w-3xl mx-auto">
                    <div class="text-center mb-6">
                        <span class="inline-block bg-clip-text text-transparent bg-gradient-to-r from-blue-300 via-purple-400 to-indigo-300 px-6 py-3 font-bold text-4xl voyager-badge">
                            ğŸš€ æ˜Ÿéš›æ¢éšªå®¶ ğŸš€
                        </span>
                    </div>

                    <div class="bg-black bg-opacity-30 rounded-full p-2 mb-6">
                        <div 
                            class="bg-gradient-to-r from-blue-400 to-purple-500 rounded-full h-4 transition-all duration-500"
                            style="width: ${((currentQuestionIndex + 1) / questions.length) * 100}%"
                        ></div>
                    </div>

                    <div class="text-center text-blue-200 text-xl mb-4">
                        èˆªè¡Œæ—¥èªŒ ${currentQuestionIndex + 1} / ${questions.length}
                    </div>

                    <div class="bg-slate-900 bg-opacity-80 backdrop-blur-sm rounded-lg shadow-2xl p-6 sm:p-8 border-4 border-blue-500">
                        <div class="text-center mb-6">
                            <div class="text-3xl font-bold text-blue-300 mb-4">
                                ${question.category}
                            </div>
                            <div class="question-text font-bold text-white mb-6 min-h-[8rem] flex flex-col items-center justify-center">
                                ${question.question}
                            </div>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            ${optionsHtml}
                        </div>

                        ${isAnswered ? `
                            <div class="mt-8">
                                <div class="text-center text-3xl sm:text-4xl font-bold mb-2 text-white">
                                    ${selectedAnswer === question.correct ? "å·²ç¢ºèªèˆªé“ï¼" : "è¨Šè™Ÿæ¥æ”¶ç•°å¸¸..."}
                                </div>
                                ${question.explanation ? `
                                    <div class="bg-slate-800 bg-opacity-80 rounded-lg p-4 mt-4 border-2 border-blue-700">
                                        <div class="text-lg font-bold text-blue-300 mb-1">ğŸ’¡ è‰¦é•·æ—¥èªŒï¼š</div>
                                        <div class="text-base text-gray-200">${question.explanation}</div>
                                    </div>
                                ` : ''}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
        }
        
        function renderResultScreen() {
            const results = calculateResults();
            const totalCorrect = Object.values(results).reduce((sum, r) => sum + r.correct, 0);
            const totalQuestions = questions.length;
            const scorePercentage = totalCorrect / totalQuestions;
            
            let resultEmoji = "ğŸ§‘â€ğŸš€";
            let resultMessage = "ä½ çš„æ€æƒ³å·²èˆªå‘æ˜Ÿè¾°å¤§æµ·ï¼Œé€™è¶Ÿæ—…ç¨‹æœ¬èº«å°±æ˜¯æœ€å‰å¤§çš„æˆå°±ï¼";
            let starCount = 4;

            if (scorePercentage >= 0.8) {
                resultEmoji = "ğŸŒŒ";
                resultMessage = "ä»»å‹™åœ“æ»¿æˆåŠŸï¼ä½ å·²æˆç‚ºå‚³å¥‡çš„æ˜Ÿéš›æ¢éšªå®¶ï¼";
                starCount = 5;
            } else if (scorePercentage >= 0.6) {
                resultEmoji = "ğŸ›°ï¸";
                resultMessage = "å“è¶Šçš„é ˜èˆªå“¡ï¼ä½ å·²ç¹ªè£½å‡ºé€šå¾€æœªçŸ¥çš„æ˜Ÿåœ–ï¼";
                starCount = 4;
            } else if (scorePercentage >= 0.4) {
                resultEmoji = "ğŸŒ ";
                resultMessage = "å‹‡æ•¢çš„å…ˆè¡Œè€…ï¼ä½ å·²é»ç‡ƒäº†æ¢ç´¢å®‡å®™çš„ç«èŠ±ï¼";
                starCount = 3;
            }

            const categoryResultsHtml = Object.keys(results).map(key => {
                const categoryMap = {
                    calculation: { name: "ğŸ§® è¨ˆç®—", style: "bg-red-900 bg-opacity-50 border-red-700 text-red-200" },
                    geometry: { name: "ğŸ”º å¹¾ä½•", style: "bg-blue-900 bg-opacity-50 border-blue-700 text-blue-200" },
                    application: { name: "ğŸ›’ æ‡‰ç”¨", style: "bg-green-900 bg-opacity-50 border-green-700 text-green-200" },
                    algebra: { name: "ğŸ¨ ä»£æ•¸", style: "bg-purple-900 bg-opacity-50 border-purple-700 text-purple-200" },
                    combination: { name: "ğŸ§© çµ„åˆ", style: "bg-yellow-900 bg-opacity-50 border-yellow-700 text-yellow-200" },
                    number_sense: { name: "ğŸ”¢ æ•¸æ„Ÿ", style: "bg-pink-900 bg-opacity-50 border-pink-700 text-pink-200" },
                };
                const info = categoryMap[key];
                return `
                    <div class="${info.style} p-4 rounded-xl border-2">
                        <div class="text-lg font-bold">${info.name}</div>
                        <div class="text-xl font-bold">${results[key].correct}/${results[key].total}</div>
                    </div>
                `;
            }).join('');

            const starsHtml = Array(starCount).fill('âœ¨').join(' ');

            appContainer.innerHTML = `
                <div class="max-w-2xl mx-auto">
                    <div class="bg-slate-900 bg-opacity-80 backdrop-blur-sm rounded-lg shadow-2xl p-8 text-center border-4 border-blue-400">
                        <div class="text-7xl mb-4">${resultEmoji}</div>
                        
                        <h2 class="text-3xl font-bold text-white mb-2">æ˜Ÿéš›æ¢éšªå®Œæˆï¼</h2>
                        <div class="text-5xl mb-4">${starsHtml}</div>
                        
                        <div class="text-2xl font-bold text-blue-300 mb-6">
                            ä»»å‹™æˆå°±ï¼š${totalCorrect} / ${totalQuestions}
                        </div>

                        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6">
                           ${categoryResultsHtml}
                        </div>

                        <div class="text-2xl mb-6 font-bold text-gray-300">
                            ${resultMessage}
                        </div>

                        <button
                            onclick="window.location.href = 'index.html'"
                            class="bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xl font-bold py-4 px-8 rounded-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-200"
                        >
                            è¿”å›åœ°çƒ ğŸŒ
                        </button>
                    </div>
                </div>
            `;
        }

        renderApp();

    </script>
</body>
</html>
